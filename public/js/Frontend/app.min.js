//click functionality
var click = function () {
    $('.app-popup-toggle').on('click', function () {
        $(this).parent().toggleClass('-is-open');
    });

    $('.gamburg-btn').on('click', function () {
        $('.main-nav').toggleClass('nav-open');
    });

    $('.app-menu-toggle').on('click', function (e) {
        $(this).toggleClass('open');
        if ($(this).hasClass('open')) {
            $('.app-left-sidebar').addClass('is-active');
        } else {
            $('.app-left-sidebar').removeClass('is-active');
        }
        e.stopPropagation();
    });

    $('.app-page').on('click', function () {
        $('.app-menu-toggle').removeClass('open');
        $('.app-left-sidebar').removeClass('is-active');
    });


    $('.search-mobile-trigger').on('click', function () {
        $('.app-search-top').addClass('has-mobile-show');
        $(this).hide();
    });


    $('.app-expand > .title').on('click', function () {
        $(this).parent().toggleClass('is-open');
        $(this).next().toggle();
    });

    $('.nav-item.has-dropdown').on('click', function () {
        $(this).toggleClass('dropdown-open');
    });

    $('.category-btn').on('click', function () {
        $(this).next().toggle();
    });

    $('#create-topic,.toggler').on('click', function () {
        $('#reply-control').toggleClass('hide-preview');
    });


    $('.switch-mode strong').on('click', function () {
        $('.toggleform').toggle();

    });

    $('#search-button').on('click', function (e) {
        e.preventDefault();
        $(this).parents('.header-dropdown-toggle').toggleClass('active');
        $('.search-menu').toggle();
    });

    $('#toggle-hamburger-menu').on('click', function (e) {
        e.preventDefault();
        $(this).parents('.header-dropdown-toggle').toggleClass('active');
        $('.hamburger-panel').toggle();
    });
    $('#user-setting-button').on('click', function (e) {
        e.preventDefault();
        $(this).parents('.header-dropdown-toggle').toggleClass('active');
        $('.user-setting-panel').toggle();
    });

    $('.filter-category-field').on('click', function () {
        $(this).parents('.filter-category').toggleClass('is-open');
    })

    $('.tracks-item-tags-btn').on('click', function () {
        $(this).parents('.app-popup').toggleClass('is-open');
    })

    $('.filter-details button.summary').on('click', function () {
        $(this).parent().toggleClass('is-expand')
    })

    $('.sort-switch button').on('click', function () {
        $('.sort-switch button').removeClass('is-active');
        $(this).addClass('is-active');
    })
    $('.auth-app-popup--toggle').on('click', function (e) {
        e.preventDefault();
        $(this).parents('.auth-app-popup').toggleClass('is-open');
    })

    $('.photo-details .summary').on('click', function (e) {
        e.preventDefault();
        $(this).parents('.details').toggleClass('is-expand');
    })


};


(function () {
    'use strict';


    //preloader
    $(window).on('load', function () {
        $(".loader").fadeOut();
        $("#preloder").delay(400).fadeOut("slow");
    });


    //icons slider
    var iconSlider = function () {
        var $slide = $('.app-tabs-item'),
            $slideGroup = $('.app-tabs-header'),
            $button = $('.is-next');


        var slideCount = $slide.length;

        var slideWidth = $slide.width() * 10;

        // var slideUlWidth =  slideCount * slideWidth;

        var slidewidth = 0;
        $('.app-tabs-wrap button.is-prev').on('click', function () {

            slidewidth = slidewidth + slideWidth;
            $slide.stop().animate({
                right: slidewidth
            }, 200, function () {
                console.log(slidewidth);
                $slide.css("left", "");
            });
            // console.log($slideGroup.innerWidth());
        });


        $('.app-tabs-wrap button.is-next').on('click', function () {
            // slidewidth=0;
            if (slidewidth === 0) {
                console.log('error')
            } else {
                console.log('ok');
                slidewidth = slidewidth - slideWidth;
                $slide.stop().animate({
                    right: slidewidth
                }, 200, function () {

                    console.log(slidewidth);
                    // $slide.css("right","");
                });
            }

        });
    };

    //initialization
    click();
    iconSlider();


})();


// $('.photobanner-slider').owlCarousel({
//     loop: true,
//     center: true,
//     items: 1,
//     nav: false,
//     navText: ["<i class='fas fa-angle-left fa-2x'></i>", "<i class='fas fa-angle-right fa-2x'></i>"],
//     margin: 0,
//     autoplay: true,
//     dots: true,
//     autoplayTimeout: 8500,
//     smartSpeed: 500,
//     responsive: {
//         0: {
//             items: 1
//         }
//     }
// });

// $('.owl-carousel').owlCarousel({
//     loop: true,
//     // margin:10,
//     nav: true,
//     items: 4,
//     pagination: false,
//     autoplay: false,
//     smartSpeed: 1000,
//     navText: ["<i class='fa fa-chevron-left fa-1x'></i>", "<i class='fa fa-chevron-right fa-1x'></i>"],
//     dots: true,
//     responsive: {
//         0: {
//             items: 1
//         },
//         400: {
//             items: 2
//         },
//         600: {
//             items: 3
//         },
//         1000: {
//             items: 4
//         }
//     }
// });


$('#reply-control .category-input .category-collection li').on('click', function () {
    var categoryname = $(this).find('.category-name').text();
    $('#reply-categoryBtn span').text(categoryname);
    $(this).parents('.select-kit-body').hide();
});

$('.editinput').on('click', function (e) {
    e.preventDefault();
    $(this).next().toggle();
});
//
// $('.icon').on('click', '.to-collection', function () {
//     console.log('click');
//     var parent = $(this).parents('.icon');
//     parent.toggleClass('is-selected');
//     var imgurl = parent.find('img').attr('src');
//     if (parent.hasClass('is-selected')) {
//         parent.find('.icon-title').prepend(`<span class="heart" style="color:#28b351"><i class="icofont-heart"></i></span>`);
//         parent.find('.to-collection').remove();
//         parent.append(`<div class="to-collection"><span class="basket"  style="color:red"><i class="icofont-trash"></i></span>
//                             <span class="red-title"  style="color:red">Remove</span>
//                         </div>`)
//         $('.wrap-icon').append(`<div class="app-icon icon" style="width: 32px; height: 32px;">
//                                <img alt="Mongrol icon" src="${imgurl}" >
//                              </div>`);
//
//         totalitem();
//         collectionWorkspace(imgurl);
//
//     } else {
//         parent.find('.icon-title span:first-child').remove();
//         parent.find('.to-collection').remove();
//         parent.append(`<div class="to-collection">
//                         <span class="plus">+&nbsp;</span>
//                         <span>Collection</span>
//                         </div>`);
//         var c=$('.wrap-icon').find('.app-icon');
//         c.each(function(){
//             if($(this).children('img').attr('src')===imgurl){
//                 $(this).remove();
//                 totalitem();
//             }
//         });
//
//         var cw=$('.collection-sidebar .icons ').find('.icon');
//         cw.each(function(){
//             if($(this).find('img').attr('src')===imgurl){
//                 $(this).remove();
//                 totalitem();
//             }
//         });
//     }
//
// })
//
//
//
// var totalitem=function(){
//     var n=$('.wrap-icon .app-icon').length;
//     $('.recent-collection .info span').text(n);
//
// }


// var collectionWorkspace=function(a){
//     $('.collection-sidebar .icons').append(`<div class="icon">
//                                     <div class="app-icon ">
//                                         <img alt="Mongrol icon" style="height: 50px; width: 50px;"
//                                              src="${a}" >
//                                     </div>
//
//                                     <div class="remove">
//                                         <i class="icofont-trash"></i>
//                                     </div>
//                                 </div>`)
// }
//
// $('.collection-sidebar ').on('click','.remove',function(){
//     console.log('click');
//     $(this).parent().remove();
//     totalitem();
// })
//
// $('.close-collection').on('click',function(){
//     $(this).parent().removeClass('is-active');
// })

$('.collections').on('click','.view-all',function(){

    $('.app-right-sidebar').toggleClass('is-active');

})
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZvbGRlci9zY3JpcHQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL2NsaWNrIGZ1bmN0aW9uYWxpdHlcbnZhciBjbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAkKCcuYXBwLXBvcHVwLXRvZ2dsZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS50b2dnbGVDbGFzcygnLWlzLW9wZW4nKTtcbiAgICB9KTtcblxuICAgICQoJy5nYW1idXJnLWJ0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnLm1haW4tbmF2JykudG9nZ2xlQ2xhc3MoJ25hdi1vcGVuJyk7XG4gICAgfSk7XG5cbiAgICAkKCcuYXBwLW1lbnUtdG9nZ2xlJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnb3BlbicpO1xuICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnb3BlbicpKSB7XG4gICAgICAgICAgICAkKCcuYXBwLWxlZnQtc2lkZWJhcicpLmFkZENsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoJy5hcHAtbGVmdC1zaWRlYmFyJykucmVtb3ZlQ2xhc3MoJ2lzLWFjdGl2ZScpO1xuICAgICAgICB9XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfSk7XG5cbiAgICAkKCcuYXBwLXBhZ2UnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJy5hcHAtbWVudS10b2dnbGUnKS5yZW1vdmVDbGFzcygnb3BlbicpO1xuICAgICAgICAkKCcuYXBwLWxlZnQtc2lkZWJhcicpLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICB9KTtcblxuXG4gICAgJCgnLnNlYXJjaC1tb2JpbGUtdHJpZ2dlcicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnLmFwcC1zZWFyY2gtdG9wJykuYWRkQ2xhc3MoJ2hhcy1tb2JpbGUtc2hvdycpO1xuICAgICAgICAkKHRoaXMpLmhpZGUoKTtcbiAgICB9KTtcblxuXG4gICAgJCgnLmFwcC1leHBhbmQgPiAudGl0bGUnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQodGhpcykucGFyZW50KCkudG9nZ2xlQ2xhc3MoJ2lzLW9wZW4nKTtcbiAgICAgICAgJCh0aGlzKS5uZXh0KCkudG9nZ2xlKCk7XG4gICAgfSk7XG5cbiAgICAkKCcubmF2LWl0ZW0uaGFzLWRyb3Bkb3duJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdkcm9wZG93bi1vcGVuJyk7XG4gICAgfSk7XG5cbiAgICAkKCcuY2F0ZWdvcnktYnRuJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKHRoaXMpLm5leHQoKS50b2dnbGUoKTtcbiAgICB9KTtcblxuICAgICQoJyNjcmVhdGUtdG9waWMsLnRvZ2dsZXInKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJyNyZXBseS1jb250cm9sJykudG9nZ2xlQ2xhc3MoJ2hpZGUtcHJldmlldycpO1xuICAgIH0pO1xuXG5cbiAgICAkKCcuc3dpdGNoLW1vZGUgc3Ryb25nJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcudG9nZ2xlZm9ybScpLnRvZ2dsZSgpO1xuXG4gICAgfSk7XG5cbiAgICAkKCcjc2VhcmNoLWJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcuaGVhZGVyLWRyb3Bkb3duLXRvZ2dsZScpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgJCgnLnNlYXJjaC1tZW51JykudG9nZ2xlKCk7XG4gICAgfSk7XG5cbiAgICAkKCcjdG9nZ2xlLWhhbWJ1cmdlci1tZW51Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5oZWFkZXItZHJvcGRvd24tdG9nZ2xlJykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAkKCcuaGFtYnVyZ2VyLXBhbmVsJykudG9nZ2xlKCk7XG4gICAgfSk7XG4gICAgJCgnI3VzZXItc2V0dGluZy1idXR0b24nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICQodGhpcykucGFyZW50cygnLmhlYWRlci1kcm9wZG93bi10b2dnbGUnKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICQoJy51c2VyLXNldHRpbmctcGFuZWwnKS50b2dnbGUoKTtcbiAgICB9KTtcblxuICAgICQoJy5maWx0ZXItY2F0ZWdvcnktZmllbGQnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQodGhpcykucGFyZW50cygnLmZpbHRlci1jYXRlZ29yeScpLnRvZ2dsZUNsYXNzKCdpcy1vcGVuJyk7XG4gICAgfSlcblxuICAgICQoJy50cmFja3MtaXRlbS10YWdzLWJ0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcuYXBwLXBvcHVwJykudG9nZ2xlQ2xhc3MoJ2lzLW9wZW4nKTtcbiAgICB9KVxuXG4gICAgJCgnLmZpbHRlci1kZXRhaWxzIGJ1dHRvbi5zdW1tYXJ5Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnRvZ2dsZUNsYXNzKCdpcy1leHBhbmQnKVxuICAgIH0pXG5cbiAgICAkKCcuc29ydC1zd2l0Y2ggYnV0dG9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcuc29ydC1zd2l0Y2ggYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ2lzLWFjdGl2ZScpO1xuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICB9KVxuICAgICQoJy5hdXRoLWFwcC1wb3B1cC0tdG9nZ2xlJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5hdXRoLWFwcC1wb3B1cCcpLnRvZ2dsZUNsYXNzKCdpcy1vcGVuJyk7XG4gICAgfSlcblxuICAgICQoJy5waG90by1kZXRhaWxzIC5zdW1tYXJ5Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5kZXRhaWxzJykudG9nZ2xlQ2xhc3MoJ2lzLWV4cGFuZCcpO1xuICAgIH0pXG5cblxufTtcblxuXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuXG4gICAgLy9wcmVsb2FkZXJcbiAgICAkKHdpbmRvdykub24oJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIubG9hZGVyXCIpLmZhZGVPdXQoKTtcbiAgICAgICAgJChcIiNwcmVsb2RlclwiKS5kZWxheSg0MDApLmZhZGVPdXQoXCJzbG93XCIpO1xuICAgIH0pO1xuXG5cbiAgICAvL2ljb25zIHNsaWRlclxuICAgIHZhciBpY29uU2xpZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgJHNsaWRlID0gJCgnLmFwcC10YWJzLWl0ZW0nKSxcbiAgICAgICAgICAgICRzbGlkZUdyb3VwID0gJCgnLmFwcC10YWJzLWhlYWRlcicpLFxuICAgICAgICAgICAgJGJ1dHRvbiA9ICQoJy5pcy1uZXh0Jyk7XG5cblxuICAgICAgICB2YXIgc2xpZGVDb3VudCA9ICRzbGlkZS5sZW5ndGg7XG5cbiAgICAgICAgdmFyIHNsaWRlV2lkdGggPSAkc2xpZGUud2lkdGgoKSAqIDEwO1xuXG4gICAgICAgIC8vIHZhciBzbGlkZVVsV2lkdGggPSAgc2xpZGVDb3VudCAqIHNsaWRlV2lkdGg7XG5cbiAgICAgICAgdmFyIHNsaWRld2lkdGggPSAwO1xuICAgICAgICAkKCcuYXBwLXRhYnMtd3JhcCBidXR0b24uaXMtcHJldicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgc2xpZGV3aWR0aCA9IHNsaWRld2lkdGggKyBzbGlkZVdpZHRoO1xuICAgICAgICAgICAgJHNsaWRlLnN0b3AoKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICByaWdodDogc2xpZGV3aWR0aFxuICAgICAgICAgICAgfSwgMjAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coc2xpZGV3aWR0aCk7XG4gICAgICAgICAgICAgICAgJHNsaWRlLmNzcyhcImxlZnRcIiwgXCJcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCRzbGlkZUdyb3VwLmlubmVyV2lkdGgoKSk7XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgJCgnLmFwcC10YWJzLXdyYXAgYnV0dG9uLmlzLW5leHQnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBzbGlkZXdpZHRoPTA7XG4gICAgICAgICAgICBpZiAoc2xpZGV3aWR0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvaycpO1xuICAgICAgICAgICAgICAgIHNsaWRld2lkdGggPSBzbGlkZXdpZHRoIC0gc2xpZGVXaWR0aDtcbiAgICAgICAgICAgICAgICAkc2xpZGUuc3RvcCgpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgICAgICByaWdodDogc2xpZGV3aWR0aFxuICAgICAgICAgICAgICAgIH0sIDIwMCwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHNsaWRld2lkdGgpO1xuICAgICAgICAgICAgICAgICAgICAvLyAkc2xpZGUuY3NzKFwicmlnaHRcIixcIlwiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy9pbml0aWFsaXphdGlvblxuICAgIGNsaWNrKCk7XG4gICAgaWNvblNsaWRlcigpO1xuXG5cbn0pKCk7XG5cblxuJCgnLnBob3RvYmFubmVyLXNsaWRlcicpLm93bENhcm91c2VsKHtcbiAgICBsb29wOiB0cnVlLFxuICAgIGNlbnRlcjogdHJ1ZSxcbiAgICBpdGVtczogMSxcbiAgICBuYXY6IGZhbHNlLFxuICAgIG5hdlRleHQ6IFtcIjxpIGNsYXNzPSdmYXMgZmEtYW5nbGUtbGVmdCBmYS0yeCc+PC9pPlwiLCBcIjxpIGNsYXNzPSdmYXMgZmEtYW5nbGUtcmlnaHQgZmEtMngnPjwvaT5cIl0sXG4gICAgbWFyZ2luOiAwLFxuICAgIGF1dG9wbGF5OiB0cnVlLFxuICAgIGRvdHM6IHRydWUsXG4gICAgYXV0b3BsYXlUaW1lb3V0OiA4NTAwLFxuICAgIHNtYXJ0U3BlZWQ6IDUwMCxcbiAgICByZXNwb25zaXZlOiB7XG4gICAgICAgIDA6IHtcbiAgICAgICAgICAgIGl0ZW1zOiAxXG4gICAgICAgIH1cbiAgICB9XG59KTtcblxuJCgnLm93bC1jYXJvdXNlbCcpLm93bENhcm91c2VsKHtcbiAgICBsb29wOiB0cnVlLFxuICAgIC8vIG1hcmdpbjoxMCxcbiAgICBuYXY6IHRydWUsXG4gICAgaXRlbXM6IDQsXG4gICAgcGFnaW5hdGlvbjogZmFsc2UsXG4gICAgYXV0b3BsYXk6IGZhbHNlLFxuICAgIHNtYXJ0U3BlZWQ6IDEwMDAsXG4gICAgbmF2VGV4dDogW1wiPGkgY2xhc3M9J2ZhIGZhLWNoZXZyb24tbGVmdCBmYS0xeCc+PC9pPlwiLCBcIjxpIGNsYXNzPSdmYSBmYS1jaGV2cm9uLXJpZ2h0IGZhLTF4Jz48L2k+XCJdLFxuICAgIGRvdHM6IHRydWUsXG4gICAgcmVzcG9uc2l2ZToge1xuICAgICAgICAwOiB7XG4gICAgICAgICAgICBpdGVtczogMVxuICAgICAgICB9LFxuICAgICAgICA0MDA6IHtcbiAgICAgICAgICAgIGl0ZW1zOiAyXG4gICAgICAgIH0sXG4gICAgICAgIDYwMDoge1xuICAgICAgICAgICAgaXRlbXM6IDNcbiAgICAgICAgfSxcbiAgICAgICAgMTAwMDoge1xuICAgICAgICAgICAgaXRlbXM6IDRcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG5cbiQoJyNyZXBseS1jb250cm9sIC5jYXRlZ29yeS1pbnB1dCAuY2F0ZWdvcnktY29sbGVjdGlvbiBsaScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY2F0ZWdvcnluYW1lID0gJCh0aGlzKS5maW5kKCcuY2F0ZWdvcnktbmFtZScpLnRleHQoKTtcbiAgICAkKCcjcmVwbHktY2F0ZWdvcnlCdG4gc3BhbicpLnRleHQoY2F0ZWdvcnluYW1lKTtcbiAgICAkKHRoaXMpLnBhcmVudHMoJy5zZWxlY3Qta2l0LWJvZHknKS5oaWRlKCk7XG59KTtcblxuJCgnLmVkaXRpbnB1dCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICQodGhpcykubmV4dCgpLnRvZ2dsZSgpO1xufSk7XG5cbiQoJy5pY29uJykub24oJ2NsaWNrJywgJy50by1jb2xsZWN0aW9uJywgZnVuY3Rpb24gKCkge1xuICAgIHZhciBwYXJlbnQgPSAkKHRoaXMpLnBhcmVudHMoJy5pY29uJyk7XG4gICAgcGFyZW50LnRvZ2dsZUNsYXNzKCdpcy1zZWxlY3RlZCcpO1xuICAgIHZhciBpbWd1cmwgPSBwYXJlbnQuZmluZCgnaW1nJykuYXR0cignc3JjJyk7XG4gICAgaWYgKHBhcmVudC5oYXNDbGFzcygnaXMtc2VsZWN0ZWQnKSkge1xuICAgICAgICBwYXJlbnQuZmluZCgnLmljb24tdGl0bGUnKS5wcmVwZW5kKGA8c3BhbiBjbGFzcz1cImhlYXJ0XCIgc3R5bGU9XCJjb2xvcjojMjhiMzUxXCI+PGkgY2xhc3M9XCJpY29mb250LWhlYXJ0XCI+PC9pPjwvc3Bhbj5gKTtcbiAgICAgICAgcGFyZW50LmZpbmQoJy50by1jb2xsZWN0aW9uJykucmVtb3ZlKCk7XG4gICAgICAgIHBhcmVudC5hcHBlbmQoYDxkaXYgY2xhc3M9XCJ0by1jb2xsZWN0aW9uXCI+PHNwYW4gY2xhc3M9XCJiYXNrZXRcIiAgc3R5bGU9XCJjb2xvcjpyZWRcIj48aSBjbGFzcz1cImljb2ZvbnQtdHJhc2hcIj48L2k+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicmVkLXRpdGxlXCIgIHN0eWxlPVwiY29sb3I6cmVkXCI+UmVtb3ZlPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YClcbiAgICAgICAgJCgnLndyYXAtaWNvbicpLmFwcGVuZChgPGRpdiBjbGFzcz1cImFwcC1pY29uIGljb25cIiBzdHlsZT1cIndpZHRoOiAzMnB4OyBoZWlnaHQ6IDMycHg7XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBhbHQ9XCJNb25ncm9sIGljb25cIiBzcmM9XCIke2ltZ3VybH1cIiA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmApO1xuXG4gICAgICAgIHRvdGFsaXRlbSgpO1xuICAgICAgICBjb2xsZWN0aW9uV29ya3NwYWNlKGltZ3VybCk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICBwYXJlbnQuZmluZCgnLmljb24tdGl0bGUgc3BhbjpmaXJzdC1jaGlsZCcpLnJlbW92ZSgpO1xuICAgICAgICBwYXJlbnQuZmluZCgnLnRvLWNvbGxlY3Rpb24nKS5yZW1vdmUoKTtcbiAgICAgICAgcGFyZW50LmFwcGVuZChgPGRpdiBjbGFzcz1cInRvLWNvbGxlY3Rpb25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicGx1c1wiPismbmJzcDs8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5Db2xsZWN0aW9uPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YCk7XG4gICAgICAgIHZhciBjPSQoJy53cmFwLWljb24nKS5maW5kKCcuYXBwLWljb24nKTtcbiAgICAgICAgYy5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBpZigkKHRoaXMpLmNoaWxkcmVuKCdpbWcnKS5hdHRyKCdzcmMnKT09PWltZ3VybCl7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB0b3RhbGl0ZW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGN3PSQoJy5jb2xsZWN0aW9uLXNpZGViYXIgLmljb25zICcpLmZpbmQoJy5pY29uJyk7XG4gICAgICAgIGN3LmVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGlmKCQodGhpcykuZmluZCgnaW1nJykuYXR0cignc3JjJyk9PT1pbWd1cmwpe1xuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgdG90YWxpdGVtKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxufSlcblxuXG5cbnZhciB0b3RhbGl0ZW09ZnVuY3Rpb24oKXtcbiAgICB2YXIgbj0kKCcud3JhcC1pY29uIC5hcHAtaWNvbicpLmxlbmd0aDtcbiAgICAkKCcucmVjZW50LWNvbGxlY3Rpb24gLmluZm8gc3BhbicpLnRleHQobik7XG5cbn1cblxuXG52YXIgY29sbGVjdGlvbldvcmtzcGFjZT1mdW5jdGlvbihhKXtcbiAgICAkKCcuY29sbGVjdGlvbi1zaWRlYmFyIC5pY29ucycpLmFwcGVuZChgPGRpdiBjbGFzcz1cImljb25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhcHAtaWNvbiBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIGFsdD1cIk1vbmdyb2wgaWNvblwiIHN0eWxlPVwiaGVpZ2h0OiA1MHB4OyB3aWR0aDogNTBweDtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjPVwiJHthfVwiID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicmVtb3ZlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJpY29mb250LXRyYXNoXCI+PC9pPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmApXG59XG5cbiQoJy5jb2xsZWN0aW9uLXNpZGViYXIgJykub24oJ2NsaWNrJywnLnJlbW92ZScsZnVuY3Rpb24oKXtcbiAgICBjb25zb2xlLmxvZygnY2xpY2snKTtcbiAgICAkKHRoaXMpLnBhcmVudCgpLnJlbW92ZSgpO1xuICAgIHRvdGFsaXRlbSgpO1xufSlcblxuJCgnLmNsb3NlLWNvbGxlY3Rpb24nKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7XG4gICAgJCh0aGlzKS5wYXJlbnQoKS5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJyk7XG59KVxuXG4kKCcuY29sbGVjdGlvbnMnKS5vbignY2xpY2snLCcudmlldy1hbGwnLGZ1bmN0aW9uKCl7XG5cbiAgICAkKCcuYXBwLXJpZ2h0LXNpZGViYXInKS50b2dnbGVDbGFzcygnaXMtYWN0aXZlJyk7XG5cbn0pIl19
