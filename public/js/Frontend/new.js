var mvpjq=jQuery;
(function(b){var c=function(){};c.test=document.createElement("div");c.isEmpty=function(b){return 0==b.replace(/^\s+|\s+$/g,"").length};c.strip=function(b){return b.replace(/^\s+|\s+$/g,"")};c.isNumber=function(b){return!isNaN(parseFloat(b))&&isFinite(b)};c.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|sony|BlackBerry/i.test(navigator.userAgent)};c.isIE=function(){return-1!=c.getInternetExplorerVersion()?!0:!1};c.isChrome=function(){return!!b.chrome&&(!!b.chrome.webstore||!!b.chrome.runtime)};
c.isSafari=function(){return navigator.vendor&&-1<navigator.vendor.indexOf("Apple")&&navigator.userAgent&&-1==navigator.userAgent.indexOf("CriOS")&&-1==navigator.userAgent.indexOf("FxiOS")};c.hasLocalStorage=function(){try{return"localStorage"in b&&null!==b.localStorage}catch(r){return!1}};c.getInternetExplorerVersion=function(){var b=-1;if("Microsoft Internet Explorer"==navigator.appName){var c=navigator.userAgent,F=/MSIE ([0-9]{1,}[.0-9]{0,})/;null!=F.exec(c)&&(b=parseFloat(RegExp.$1))}else"Netscape"==
navigator.appName&&(c=navigator.userAgent,F=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/,null!=F.exec(c)&&(b=parseFloat(RegExp.$1)));return b};c.isIOS=function(){return navigator.userAgent.match(/(iPad|iPhone|iPod)/g)};c.isiPhoneIpod=function(){var b=navigator.userAgent;return-1<b.indexOf("iPhone")||-1<b.indexOf("iPod")};c.isAndroid=function(){return-1<navigator.userAgent.indexOf("Android")};c.hasHistory=function(){return!(!b.history||!history.pushState)};c.hasDownloadSupport=function(){return"download"in
document.createElement("a")};c.volumeCanBeSet=function(){var b=document.createElement("audio");if(!b)return!1;b.volume=0;return 0==b.volume?!0:!1};c.supportsWebGL=function(){try{return!!b.WebGLRenderingContext&&!!document.createElement("canvas").getContext("experimental-webgl")}catch(r){return!1}};c.canPlayMp4=function(){var b=document.createElement("video");return!(!b.canPlayType||!b.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"').replace(/no/,""))};c.canPlayMp3=function(){var b=document.createElement("audio");
return!(!b.canPlayType||!b.canPlayType("audio/mpeg;").replace(/no/,""))};c.canPlayWav=function(){var b=document.createElement("audio");return!(!b.canPlayType||!b.canPlayType("audio/wav;").replace(/no/,""))};c.relativePath=function(b){return/^(?:[a-z]+:)?\/\//i.test(b)};c.qualifyURL=function(b){var c=document.createElement("a");c.href=b;return c.href};c.hasFullscreen=function(){return c.test.requestFullscreen||c.test.mozRequestFullScreen||c.test.msRequestFullscreen||c.test.oRequestFullscreen||c.test.webkitRequestFullScreen};
c.selectText=function(c){var r=document;if(r.body.createTextRange)r=r.body.createTextRange(),r.moveToElementText(c),r.select();else if(b.getSelection){var F=b.getSelection();r=r.createRange();r.selectNodeContents(c);F.removeAllRanges();F.addRange(r)}};c.randomiseArray=function(b){var c=[],r=[],J;for(J=0;J<b;J++)c[J]=J;for(J=0;J<b;J++){var v=Math.round(Math.random()*(c.length-1));r[J]=c[v];c.splice(v,1)}return r};c.sortArray=function(b,c){var r,J=b.length,v=[];for(r=0;r<J;r++)v[r]=b[c[r]];return v};
c.keysrt=function(b,c,F){var r=1;F&&(r=-1);return b.sort(function(b,m){var v=b[c],k=m[c];return r*(v<k?-1:v>k?1:0)})};c.formatTime=function(b){b=parseInt(b,10);var c=Math.floor(b/3600),r=Math.floor((b-3600*c)/60);b=b-3600*c-60*r;if(0<c)return 10>c&&(c="0"+c),10>r&&(r="0"+r),10>b&&(b="0"+b),c+":"+r+":"+b;10>r&&(r="0"+r);10>b&&(b="0"+b);return r+":"+b};c.toSeconds=function(b){b=b.split(/[\.:,]+/);return Number(3600*+b[0]+60*+b[1]+ +b[2])};c.isScrolledIntoView=function(c){c=c.getBoundingClientRect();
var r=c.bottom;return 0<=c.top&&r<=b.innerHeight};c.getElementOffsetTop=function(c){c=c.getBoundingClientRect();var r=document.body,F=document.documentElement;return Math.round(c.bottom-100+(b.pageYOffset||F.scrollTop||r.scrollTop)-(F.clientTop||r.clientTop||0))};c.getScrollTop=function(c){c=document.documentElement;return(b.pageYOffset||c.scrollTop)-(c.clientTop||0)};c.rgbToHex=function(b){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(b)?b:(b=b.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&
4===b.length?"#"+("0"+parseInt(b[1],10).toString(16)).slice(-2)+("0"+parseInt(b[2],10).toString(16)).slice(-2)+("0"+parseInt(b[3],10).toString(16)).slice(-2):""};c.getUrlParameter=function(c){var r={};b.location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(b,c,v){r[c]=v});return c?r[c]:r};c.checkCssExist=function(b){for(var c=document.styleSheets,r=0,J=c.length;r<J;r++)if(c[r].href==b)return;c=document.createElement("link");c.rel="stylesheet";c.href=b;document.getElementsByTagName("head")[0].appendChild(c)};
b.MVPUtils=c})(window);
(function(b,c){b.MVPYoutubeLoader=function(b){function r(b){c.ajax({url:b,dataType:"jsonp"}).done(function(b){if(b.error&&b.error.message)console.log(b.error.message);else{var x,da=b.items.length;(A=b.nextPageToken)&&(A=Y+"&pageToken="+A);for(x=0;x<da&&C.length!=L;x++){var B=b.items[x];if("youtube_playlist"==v||"youtube_single"==v||"youtube_single_list"==v||"youtube_channel"==v)B.status?"public"==B.status.privacyStatus&&C.push(F(B,v)):B.snippet&&"Private video"!=B.snippet.title&&C.push(F(B,v))}if("youtube_single"==
v||"youtube_single_list"==v)c(J).trigger("MVPYoutubeLoader.END_LOAD",{data:C,nextPageToken:A});else if(C.length<L)if(A){C.length+k>L&&(k=L-C.length,x=A.substr(0,Y.indexOf("&maxResults=")+12),da=A.substr(Y.indexOf("&key=")),A=x+k.toString()+da);if("youtube_playlist"==v)var jb=A;else"youtube_channel"==v&&(jb="https://www.googleapis.com/youtube/v3/search?pageToken="+b.nextPageToken+"&part=id,snippet&type=video&maxResults="+k+"&order=date&channelId="+m.path+"&key="+va);r(jb)}else c(J).trigger("MVPYoutubeLoader.END_LOAD",
{data:C,nextPageToken:A});else c(J).trigger("MVPYoutubeLoader.END_LOAD",{data:C,nextPageToken:A})}}).fail(function(b,c,k){console.log(b,c,k)})}function F(b,c){var x=jQuery.extend(!0,{},m);x.type="youtube";"youtube_single"==c||"youtube_single_list"==c?x.id=b.id:"youtube_playlist"==c?x.id=b.contentDetails.videoId:"youtube_channel"==c&&(x.id=b.id.videoId);b.snippet&&(!x.title&&b.snippet.title&&(x.title=b.snippet.title),!x.description&&b.snippet.description&&(x.description=b.snippet.description),b.snippet.publishedAt&&
(x.date=b.snippet.publishedAt),!b.thumb&&b.snippet.thumbnails&&(x.thumbnails=b.snippet.thumbnails));b.contentDetails&&b.contentDetails.projection&&"360"==b.contentDetails.projection&&(x.is360=!0);return x}var J=this,v,m,C=[],k=50,Y,A,L,B,va=b.youtubeAppId;this.resumeLoad=function(b){C=[];b?(Y=b.substr(0,b.lastIndexOf("&pageToken=")),r(b)):c(J).trigger("MVPYoutubeLoader.END_LOAD",{data:C,nextPageToken:b})};this.setDataFromCache=function(b){C=[];m=b;L=m.limit||400;k=50;L<k&&(k=L);B=m.sort||"date";v=
m.type};this.setData=function(c){if(va){C=[];m=c;L=m.limit||400;k=50;L<k&&(k=L);B=m.sort||"relevance";v=m.type;A=null;var x="";-1<b.playlistItemContent.indexOf("title")&&(x+="title,");-1<b.playlistItemContent.indexOf("description")&&(x+="description,");-1<b.playlistItemContent.indexOf("date")&&(x+="publishedAt,");-1<b.playlistItemContent.indexOf("thumb")&&(x+="thumbnails(standard(url),medium(url),high(url)),");0<x.length?(x=x.substr(0,x.length-1),c=",snippet",x=",snippet("+x+")"):x=c="";if("youtube_single"==
v||"youtube_single_list"==v)"youtube_single_list"==v&&(m.path=m.path.replace(/\s+/g,"")),Y="https://www.googleapis.com/youtube/v3/videos?id="+m.path+"&key="+va+"&part=id"+c+"&fields=items(id"+x+")";else if("youtube_playlist"==v)Y="https://www.googleapis.com/youtube/v3/playlistItems?playlistId="+m.path+"&maxResults="+k+"&key="+va+"&part=contentDetails"+c+"&fields=items(contentDetails(videoId)"+x+"),nextPageToken";else if("youtube_channel"==v)Y="https://www.googleapis.com/youtube/v3/search?channelId="+
m.path+"&maxResults="+k+"&key="+va+"&order="+B+"&part=id"+c+"&fields=items(id(videoId)"+x+"),nextPageToken";else{console.log("Wrong youtube type!");return}r(Y)}else alert("Youtube API key missing! Set API key in settings.")};this.getNextPageToken=function(){return A}}})(window,jQuery);
(function(b,c){b.MVPVimeoLoader=function(r){function jb(b){c.ajax({type:"GET",url:m+"includes/vimeo/vimeo_data.php",data:{type:"next_page",path:b,vai:da},dataType:"json"}).done(function(b){F(b)}).fail(function(b,c,x){console.log(b,c,x)})}function F(b){Y=b.body.paging&&b.body.paging.next?b.body.paging.next:null;var x;var m=b.body.data?b.body.data.length:1;for(x=0;x<m&&L.length!=C;x++){var r=b.body.uri?b.body:b.body.data[x];L.push(J(r))}L.length<C?Y?(L.length+k>C&&(k=C-L.length,b=Y.split("per_page=")[1].split("&")[0],
Y=Y.replace("per_page="+b,"per_page="+k)),jb(Y)):c(v).trigger("MVPVimeoLoader.END_LOAD",{data:L,nextPageToken:Y}):c(v).trigger("MVPVimeoLoader.END_LOAD",{data:L,nextPageToken:Y})}function J(b){var k=c.extend(!0,{},A);k.deeplink&&"vimeo_single"!=k.origtype&&(k.deeplink+=(va+1).toString(),va++);k.type="vimeo";-1<b.uri.indexOf(":")&&(b.uri=b.uri.substr(0,b.uri.lastIndexOf(":")));k.id=b.uri.substr(b.uri.lastIndexOf("/")+1);b.duration&&(k.duration=b.duration);!k.title&&b.name&&(k.title=b.name);!k.description&&
b.description&&(k.description=b.description);!k.thumb&&b.pictures&&(k.pictures=b.pictures);k.url||(k.url="https://vimeo.com/"+k.id);k.release_time=b.release_time;k.plays=b.stats.plays;k.comments=b.metadata.connections.comments.total;k.likes=b.metadata.connections.likes.total;k.categories=b.categories;k.user=b.user;b.download&&b.download.link&&(k.download=b.download.link);return k}var v=this,m=r.sourcePath,C,k=100,Y,A=[],L=[],B,va,da=r.vai;this.resumeLoad=function(b){L=[];b?jb(b):c(v).trigger("MVPVimeoLoader.END_LOAD",
{data:L,nextPageToken:b})};this.getData=function(b){B=null;"vimeo_channel"==b.type||"vimeo_group"==b.type||"vimeo_user_album"==b.type?c.ajax({type:"GET",url:m+"includes/vimeo/vimeo_data.php",data:{type:"vimeo_user_album"==b.type?"vimeo_user_info":b.type+"_info",path:b.path,user_id:b.user_id,vai:da},dataType:"json"}).done(function(c){B=c.body;B.fetch_type=b.type;v.setData(b)}).fail(function(b,c,k){console.log(b,c,k)}):"vimeo_album"==b.type?v.setData(b):"vimeo_video_query"==b.type&&v.setData(b)};this.setDataFromCache=
function(b){L=[];A=b;k=100;C=A.limit||1E3;C<k&&(k=C)};this.setData=function(v){if("file:"==b.location.protocol)console.log("Using Vimeo locally is not possible! This requires online server connection!");else{L=[];A=v;k=100;C=A.limit||1E3;C<k&&(k=C);va=0;Y=null;"vimeo_single"==A.type&&-1<A.path.indexOf("/")&&(A.path=A.path.replace("/",":"));var r=m+"includes/vimeo/vimeo_data.php";v={type:A.type,path:A.path,user_id:A.user_id,sort:A.sort,sortDirection:A.sortDirection,page:1,perPage:C<k?C:k,vai:da};c.ajax({type:"GET",
url:r,data:v,dataType:"json"}).done(function(b){if(!b.body)return console.log("Vimeo response null!"),!1;F(b)}).fail(function(b,c,k){console.log(b,c,k)})}};this.getComments=function(b,k){c.ajax({type:"GET",url:m+"includes/vimeo/vimeo_data.php",data:{type:"video_comments",video_id:b,sortDirection:"desc",page:1,perPage:k,vai:da},dataType:"json"}).done(function(b){c(v).trigger("MVPVimeoLoader.COMMENTS_END_LOAD",{data:b.body})}).fail(function(b,k,m){console.log(b,k,m);c(v).trigger("MVPVimeoLoader.COMMENTS_ERROR_LOAD")})};
this.resumeComments=function(b){c.ajax({type:"GET",url:m+"includes/vimeo/vimeo_data.php",data:{type:"next_page",path:b,vai:da},dataType:"json"}).done(function(b){c(v).trigger("MVPVimeoLoader.COMMENTS_END_LOAD",{data:b.body})}).fail(function(b,k,m){console.log(b,k,m);c(v).trigger("MVPVimeoLoader.COMMENTS_ERROR_LOAD")})};this.getNextPageToken=function(){return Y}}})(window,jQuery);
(function(b,c){b.MVPPlaylistManager=function(b){function r(){B=MVPUtils.randomiseArray(m)}var F=this,J=b.loopingOn,v=b.randomPlay,m,C=!1,k=-1,Y,A,L=!1,B=[],va=!1;setTimeout(function(){clearTimeout(this);c(F).trigger("MVPPlaylistManager.RANDOM_CHANGE",v);c(F).trigger("MVPPlaylistManager.LOOP_CHANGE",J)},50);this.setCounter=function(b,x){"undefined"===typeof x&&(x=!0);k=x?k+parseInt(b,10):parseInt(b,10);if(isNaN(k))alert("MVPPlaylistManager message: No active media, counter = "+k);else if(C=!1,J){if(v)if(k>
m-1){k=B[m-1];r();if(B[0]==k){var da=B.splice(0,1);B.push(da)}k=0}else 0>k&&(k=B[0],r(),B[m-1]==k&&(da=B.splice(m-1,1),B.unshift(da)),k=m-1);else k>m-1?k=0:0>k&&(k=m-1);c(F).trigger("MVPPlaylistManager.COUNTER_READY",k)}else k>m-1?(k=m-1,C=!0):0>k&&(k=0),C?c(F).trigger("MVPPlaylistManager.PLAYLIST_END"):c(F).trigger("MVPPlaylistManager.COUNTER_READY",k)};this.getCounter=function(){return v?va?k:B[k]:k};this.advanceHandler=function(b){va=!1;L?(L=!1,A+b>m-1?(k=m-1,c(F).trigger("MVPPlaylistManager.COUNTER_READY",
k)):0>A+b?(k=0,c(F).trigger("MVPPlaylistManager.COUNTER_READY",k)):F.setCounter(A+b,!1)):F.setCounter(b)};this.processPlaylistRequest=function(b){va=!1;v&&(va=!0,Y=b,L||(A=k,L=!0));F.setCounter(b,!1)};this.setPlaylistItems=function(b,c){"undefined"===typeof c&&(c=!0);c&&(k=-1);m=b;v&&r()};this.reSetCounter=function(b){"undefined"===typeof b?k=-1:(b=parseInt(b,10),m?(b>m-1?b=m-1:0>b&&(b=0),k=b):k=-1)};this.setRandom=function(b){v="undefined"!==typeof b?b:!v;3>m&&(v=!1);v&&r();if(v){var x=B.length;
for(b=0;b<x;b++)if(B[b]==k){if(0==b)break;b=B.splice(b,1);B.unshift(parseInt(b,10));break}k=0}else L?(k=Y,L=!1):k=B[k];c(F).trigger("MVPPlaylistManager.RANDOM_CHANGE",v)};this.getRandom=function(b){return v};this.setLooping=function(b){J="undefined"!==typeof b?b:!J;c(F).trigger("MVPPlaylistManager.LOOP_CHANGE",J)};this.getLooping=function(b){return J};this.getPosition=function(b){return B.indexOf(b)}}})(window,jQuery);
(function(b,c){function r(b,c,m,r){var k={},v=m.width();m=m.height();r=jb(c,r);c=r.width;r=r.height;var A=(v-0)/(m-0),J=c/r;J<A?b?(k.width=(m-0)/r*c,k.height=m-0):(k.height=(v-0)/c*r,k.width=v-0):J>A?b?(k.height=(v-0)/c*r,k.width=v-0):(k.width=(m-0)/r*c,k.height=m-0):(k.width=v-0,k.height=m-0);return k}function jb(b,c){var m={};"video"==b?c[0]&&c[0].videoWidth&&c[0].videoHeight?(m.width=c[0].videoWidth,m.height=c[0].videoHeight):(m.width=16,m.height=9):"iframe"==b?c.sw&&c.sh?(m.width=c.sw,m.height=
c.sh):(m.width=16,m.height=9):"image"==b&&(m.width=c.width(),m.height=c.height());return m}var F=function(){};F.resizeMedia=function(b,c,m,C){var k,v=m.width();var A=m.height();0==c?k=jb(b,C):1==c?k=r(!0,b,m,C):2==c&&(k=r(!1,b,m,C));b=parseInt((v-k.width)/2,10);A=parseInt((A-k.height)/2,10);C.css({width:k.width+"px",height:k.height+"px",left:b+"px",top:A+"px"})};b.MVPAspectRatio=F})(window,jQuery);
(function(b){b.fn.mvp=function(c){function r(){oa.swipe({swipeLeft:function(a,l,b,D,d,c){if(!u)return!1;("audio"==e||"video"==e&&"video_360"!=O||"youtube"==e&&"chromeless"==wa&&!h.is360||"vimeo"==e&&"chromeless"==ia&&!h.is360)&&Jb()},swipeRight:function(a,l,b,D,d,c){if(!u)return!1;("audio"==e||"video"==e&&"video_360"!=O||"youtube"==e&&"chromeless"==wa&&!h.is360||"vimeo"==e&&"chromeless"==ia&&!h.is360)&&Oc()}})}function jb(a){if(!od){if("touchstart"==a.type){if(a=a.originalEvent.touches,!(a&&0<a.length))return!1}else a.preventDefault();
od=!0;Ya.on(kb,function(a){a:{if("touchmove"==a.type){if(a.originalEvent.touches&&a.originalEvent.touches.length)var l=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)l=a.originalEvent.changedTouches;else break a;if(1<l.length)break a;l=l[0]}else l=a;a.preventDefault();F(l)}}).on(jc,function(a){a:if(od){od=!1;Ya.off(kb).off(jc);if("touchend"==a.type){if(a.originalEvent.touches&&a.originalEvent.touches.length)var b=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&
a.originalEvent.changedTouches.length)b=a.originalEvent.changedTouches;else break a;if(1<b.length)break a;b=b[0]}else b=a;a.preventDefault();F(b)}})}return!1}function F(a){console.log(a.pageX);a=a.pageX-Kb.offset().left;0>a?a=0:a>Za&&(a=Za);var b=Math.max(0,Math.min(1,a/Za));if("audio"==e){var f=w.duration;var D=b*f;try{w.currentTime=D.toFixed(1)}catch(d){}}else if("video"==e){f=p.duration;D=b*f;try{p.currentTime=D.toFixed(1)}catch(d){}}else"youtube"==e?(f=z.getDuration(),D=b*f,z.seekTo(D)):"vimeo"==
e&&(0!=nb?(f=nb,D=b*f,y.setCurrentTime(D)):y.getDuration().then(function(a){f=a;D=b*f;y.setCurrentTime(D)}),"chromeless"==ia&ea&&ja.show());ea||(pd(!0),le.width(D/f*Za))}function J(a){var b=a.pageX-Kb.offset().left;if(!MVPUtils.isNumber(b))return!1;0>b?b=0:b>Za&&(b=Za);var f=Math.max(0,Math.min(1,b/Za));if(!MVPUtils.isNumber(f))return!1;b=g[0].getBoundingClientRect();var D=$a[0].getBoundingClientRect();if("audio"==e)var d=w.duration;else"video"==e?d=p.duration:"youtube"==e?d=z.getDuration():"vimeo"==
e&&(d=nb);if(h.previewSeek&&ob.length){var c=d*f;MVPUtils.isNumber(d)&&Eg.html(MVPUtils.formatTime(c));f=ob.length;for(d=0;d<f;d++){var k=ob[d];var jf=k.start;var q=k.end;if(c>=jf&&c<=q){if(!pb){k=k.url;var m=k.substr(k.lastIndexOf("=")+1).split(",");m="-"+m[0]+"px -"+m[1]+"px";pb={};pb.start=jf;pb.end=q;Fg.css({"background-image":"url("+k+")","background-position":m})}}else pb&&(c<pb.start||c>pb.end)&&(pb=null)}a=a.pageX-Sa.scrollLeft()-b.left-Wb.outerWidth()/2;c=D.top-b.top-Wb.outerHeight()-10;
"lightbox"!=Ta&&(0>a?a=0:a+Wb.outerWidth()>g.width()&&(a=g.width()-Wb.outerWidth()));Wb.css({left:parseInt(a,10)+"px",top:parseInt(c,10)+"px"}).show()}else a=a.pageX-Sa.scrollLeft()-b.left-T.outerWidth()/2,c=D.top-b.top-T.outerHeight(),"lightbox"!=Ta&&(0>a?a=0:a+T.outerWidth()>g.width()&&(a=g.width()-T.outerWidth())),T.css({left:parseInt(a,10)+"px",top:parseInt(c,10)+"px"}).show(),MVPUtils.isNumber(d)&&T.text(MVPUtils.formatTime(d*f)+" / "+MVPUtils.formatTime(d))}function v(a){if(u){if(!qd){if("touchstart"==
a.type){if(a=a.originalEvent.touches,!(a&&0<a.length))return!1}else a.preventDefault();qd=!0;Ya.on(kb,function(a){a:{if("touchmove"==a.type){if(a.originalEvent.touches&&a.originalEvent.touches.length)var b=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)b=a.originalEvent.changedTouches;else break a;if(1<b.length)break a;b=b[0]}else b=a;a.preventDefault();C(b)}}).on(jc,function(a){a:if(qd){qd=!1;Ya.off(kb).off(jc);if("touchend"==a.type){if(a.originalEvent.touches&&
a.originalEvent.touches.length)var b=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)b=a.originalEvent.changedTouches;else break a;if(1<b.length)break a;b=b[0]}else b=a;a.preventDefault();C(b)}})}return!1}}function m(){if(!u)return!1;0<K?(me=K,K=0):K=me;k()}function C(a){Xb?K=Math.max(0,Math.min(1,(a.pageX-kc.offset().left)/lc)):(K=Math.max(0,Math.min(1,(a.pageY-kc.offset().top)/lc)),K=1-K);k()}function k(a){"undefined"!==typeof a&&(K=a);"undefined"!==
typeof K&&("audio"==e?w&&(w.volume=K,w.muted=0==K?!0:!1):"video"==e?p&&(p.volume=K,p.muted=0==K?!0:!1):"youtube"==e?z&&(z.setVolume(100*K),0==K?z.mute():z.unMute()):"vimeo"==e&&y&&y.setVolume(K));mc.children().hide();0==K?(mc.find(".mvp-btn-volume-off").show(),"custom"==qb&&(nc.find(".mvp-context-volume-mute").hide(),nc.find(".mvp-context-volume-unmute").show())):0<K&&.5>K?(mc.find(".mvp-btn-volume-down").show(),"custom"==qb&&(nc.find(".mvp-context-volume-unmute").hide(),nc.find(".mvp-context-volume-mute").show())):
.5<=K&&1>=K&&(mc.find(".mvp-btn-volume-up").show(),"custom"==qb&&(nc.find(".mvp-context-volume-unmute").hide(),nc.find(".mvp-context-volume-mute").show()));Gg.css(Xb?"width":"height",K*lc+"px");b(q).trigger("volumeChange",{instance:q,instanceName:P,volume:K})}function Y(a){var b=Xb?a.pageX-kc.offset().left:a.pageY-kc.offset().top;0>b?b=0:b>lc&&(b=lc);b=Math.max(0,Math.min(1,b/lc));if(!MVPUtils.isNumber(b))return!1;Xb||(b=1-b);b=parseInt(100*b,10);T.text(b+" %");var f=g[0].getBoundingClientRect(),
c=Fa[0].getBoundingClientRect();Xb?(b=parseInt(a.pageX-Sa.scrollLeft()-f.left-T.outerWidth()/2),a=parseInt(c.top-f.top-T.outerHeight())):(b=parseInt(c.left-f.left-T.outerWidth()/2+Fa.outerWidth()/2),a=parseInt(a.pageY-Sa.scrollTop()-f.top-T.outerHeight()-10));T.css({left:b+"px",top:a+"px"}).show()}function A(a){var b="https:"==window.location.protocol?"https:":"http:",f=(window.screen.width-600)/2,c=(window.screen.height-300)/2,d=h.title||"",n=h.description||"",e=h.thumb||h.thumbDefault,g=h.share||
window.location.href;MVPUtils.relativePath(e)||(e=MVPUtils.qualifyURL(h.thumb));if("facebook"==a){if(window.FB){FB.ui({method:"share_open_graph",action_type:"og.shares",action_properties:JSON.stringify({object:{"og:url":g,"og:title":d,"og:description":n,"og:image":e}})},function(a){});return}}else if("twitter"==a)var k=b+"//twitter.com/intent/tweet?url="+encodeURIComponent(g)+"&text="+encodeURIComponent(d);else if("googleplus"==a)k=b+"//plus.google.com/share?url="+encodeURIComponent(g);else if("tumblr"==
a)k=b+"//www.tumblr.com/share/link?url="+encodeURIComponent(g)+"&amp;name="+encodeURIComponent(d)+"&amp;description="+encodeURIComponent(n);else if("reddit"==a)k=b+"//www.reddit.com/submit?url="+encodeURIComponent(g);else if("linkedin"==a)k=b+"//www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(g)+"&title="+encodeURIComponent(d)+"&summary="+encodeURIComponent(n)+"&source="+document.title;else if("digg"==a)k=b+"//digg.com/submit?url="+encodeURIComponent(g)+"&title="+encodeURIComponent(d);
else if("pinterest"==a)k=b+"//www.pinterest.com/pin/create/button/?url="+encodeURIComponent(g)+"&media="+encodeURIComponent(e)+"&description="+encodeURIComponent(n);else if("whatsapp"==a){if(fa){a=encodeURIComponent(d)+" - "+encodeURIComponent(g);window.location.href="whatsapp://send?text="+a;return}alert("Please share this content on mobile device!")}k&&window.open(k,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,width=600,height=300,left="+f+",top="+c)}function L(a){(function(a,b,c){var f=
a.getElementsByTagName(b)[0];a.getElementById(c)||(a=a.createElement(b),a.id=c,a.src="//connect.facebook.net/en_US/sdk.js",f.parentNode.insertBefore(a,f))})(document,"script","facebook-jssdk");window.fbAsyncInit=function(){FB.init({appId:a,xfbml:!0,version:"v2.9"})}}function B(){G.find(".mvp-settings-menu").css("display","none");var a=G.width(),b=G.height();G.css({width:"auto",height:"auto"});rb.css("display","block");var f=rb.width(),c=rb.height();G.css({width:a+"px",height:b+"px"});setTimeout(function(){G.css({width:f+
"px",height:c+"px"})},20)}function va(){if(b(this).hasClass("mvp-menu-active"))return B(),!1;var a=b(this).attr("data-value");"audio"==e?w.playbackRate=Number(a):"video"==e?p.playbackRate=Number(a):"youtube"==e?z.setPlaybackRate(Number(a)):"vimeo"==e&&y.setPlaybackRate(Number(a)).then(function(a){})["catch"](function(a){console.log(a.name)});h.playbackRate=a;B()}function da(a){rd&&rd.removeClass("mvp-menu-active");rd=kf.find(".mvp-menu-item[data-value='"+a+"']").addClass("mvp-menu-active");G.find(".mvp-playback-rate-menu-value").text(rd.text())}
function x(a,l){var f,c=a.length;for(f=0;f<c;f++){var d=a[f];d.label?b("<li/>").addClass("mvp-menu-item").attr({"data-value":d.value,"data-label":d.label}).text(d.label).on("click",ff).appendTo(sd):b("<li/>").addClass("mvp-menu-item").attr("data-value",d).text(d).on("click",ff).appendTo(sd)}ke(l);lf.removeClass("mvp-force-hide")}function ff(){if(b(this).hasClass("mvp-menu-active"))return B(),!1;sb&&sb.removeClass("mvp-menu-active");sb=b(this).addClass("mvp-menu-active");var a=sb.attr("data-value");
h.quality=a;if("audio"==e||"video"==e)if("hls"==O){var l=parseInt(a,10);-1==a?(U.currentLevel=l,U.nextLevel=l,U.loadLevel=l):U.currentLevel=a}else"dash"!=O&&xa(!0);else"youtube"==e&&z.setPlaybackQuality(a);G.find(".mvp-quality-menu-value").text(sb.text());B()}function ke(a){sb&&sb.removeClass("mvp-menu-active");sb=sd.find(".mvp-menu-item[data-value='"+a+"']").addClass("mvp-menu-active");G.find(".mvp-quality-menu-value").text(sb.text())}function gf(){var a=b(this).attr("data-value");"hls"==O&&(U.audioTrack=
a);B()}function hf(){var a,l=h.subtitles.length,f=Pc;for(a=0;a<l;a++){var c=h.subtitles[a];b("<li/>").addClass("mvp-menu-item").attr({"data-value":c.value,"data-label":c.label}).text(c.label).on("click",mf).appendTo(oc);c["default"]&&(f=c.label)}b("<li/>").addClass("mvp-menu-item").attr("data-label",Pc).text(Pc).on("click",mf).appendTo(oc);q.setSubtitle(f);nf.removeClass("mvp-force-hide")}function mf(){if(b(this).hasClass("mvp-menu-active"))return B(),!1;Ga&&Ga.removeClass("mvp-menu-active");Ga=b(this).addClass("mvp-menu-active");
var a=Ga.attr("data-label");q.setSubtitle(a);B()}function Hg(a){b.ajax({url:a.src}).done(function(b){b=b.split(/[\r\n]/);var f;for(f in b){var l=b[f];if(/.vtt/.test(l)){a.src=a.src.substr(0,a.src.lastIndexOf("/")+1)+l;var d=!0;break}}d?of(a):console.log("Error loading subtitle!")}).fail(function(a,b,c){console.log(a,b,c)})}function of(a){if("file:"==window.location.protocol)return console.log("Getting subtitle locally is not possible! This requires online server connection."),!1;ab=[];var l=a.src;
-1!=l.indexOf("ebsfm:")&&(l=atob(l.substr(6)));b.ajax({url:l}).done(function(b){b=b.replace(/\r\n|\r|\n/g,"\n");b=MVPUtils.strip(b);b=b.split("\n\n");var f,d=0,l;for(f in b){var c=b[f].split("\n");if("WEBVTT"!=c){if(2<=c.length)if(2<c.length){var e=MVPUtils.strip(c[1].split(" --\x3e ")[0]);var h=MVPUtils.strip(c[1].split(" --\x3e ")[1]);var g=c[2];if(2<c.length)for(l=3;l<c.length;l++)g+="\n"+c[l]}else e=MVPUtils.strip(c[0].split(" --\x3e ")[0]),h=MVPUtils.strip(c[0].split(" --\x3e ")[1]),g=c[1];ab[d]=
{};ab[d].start=MVPUtils.toSeconds(e);ab[d].end=MVPUtils.toSeconds(h);ab[d].text=g;d++}}td[a.label]=ab;Yb=!0;Qc=null;pd(!0)}).fail(function(a,b,l){console.log(a,b,l)})}function Ig(){bb=[];b.ajax({url:h.chapters}).done(function(a){a=a.replace(/\r\n|\r|\n/g,"\n");a=MVPUtils.strip(a);a=a.split("\n\n");var b,f=0,c;for(b in a){var d=a[b].split("\n");if("WEBVTT"!=d){if(2<=d.length)if(2<d.length){var n=MVPUtils.strip(d[1].split(" --\x3e ")[0]);var e=MVPUtils.strip(d[1].split(" --\x3e ")[1]);var h=d[2];if(2<
d.length)for(c=3;c<d.length;c++)h+="\n"+d[c]}else n=MVPUtils.strip(d[0].split(" --\x3e ")[0]),e=MVPUtils.strip(d[0].split(" --\x3e ")[1]),h=d[1];bb[f]={};bb[f].start=MVPUtils.toSeconds(n);bb[f].end=MVPUtils.toSeconds(e);bb[f].text=h;f++}}}).fail(function(a,b,f){console.log("Error loading chapters: ",a.responseText,b,f)})}function Jg(a){var l,f=bb.length;for(l=0;l<f;l++){var c=bb[l];var d=Math.abs(c.end-c.start);d=d/a*100;var n=c.start/a*100;c=b('<div class="mvp-chapter-indicator"><div class="mvp-chapter-indicator-highlight"></div></div>').css({width:d+
"%",left:n+"%"}).attr({"data-title":c.text,"data-start":c.start,"data-end":c.end});bb[l].chapter=c;fa||c.on("mouseenter",function(){var a=b(this);a.find(".mvp-chapter-indicator-highlight").addClass("mvp-chapter-indicator-highlight-visible");Rc.css("opacity",1).text(a.attr("data-title"));ea||V.hide()}).on("mouseleave",function(){b(this).find(".mvp-chapter-indicator-highlight").removeClass("mvp-chapter-indicator-highlight-visible");Rc.css("opacity",0);ea||V.show()}).appendTo(Kb);if(pf)c.on("click",
function(){var a=Number(b(this).attr("data-start"));q.seek(a);ea||pd(!0)})}}function Kg(a){var l,f=lb.length;for(l=0;l<f;l++){var c=lb[l];var d=Math.round(c.begin/a*100);c.marker=b('<div class="mvp-ad-indicator"></div>').css({left:d+"%"}).appendTo(Kb)}}function Lg(){ob=[];b.ajax({url:h.previewSeek}).done(function(a){a=a.replace(/\r\n|\r|\n/g,"\n");a=MVPUtils.strip(a);a=a.split("\n\n");var b,f=0;for(b in a){var c=a[b].split("\n");if("WEBVTT"!=c){if(2<=c.length){var d=MVPUtils.strip(c[0].split(" --\x3e ")[0]);
var n=MVPUtils.strip(c[0].split(" --\x3e ")[1]);c=c[1];ob[f]={};ob[f].start=MVPUtils.toSeconds(d);ob[f].end=MVPUtils.toSeconds(n);ob[f].url=c}f++}}}).fail(function(a,b,f){console.log(a,b,f)})}function Mg(a){a.preventDefault();if(!u)return!1;a=b(a.currentTarget);if(a.hasClass("mvp-playback-toggle")||a.hasClass("mvp-big-play"))q.togglePlayback();else if(a.hasClass("mvp-playlist-toggle"))qf();else if(a.hasClass("mvp-info-toggle"))ud();else if(a.hasClass("mvp-info-close"))ud(!1);else if(a.hasClass("mvp-share-close"))vd(!1);
else if(a.hasClass("mvp-pwd-confirm")){var l=wd.val();if(MVPUtils.isEmpty(l))alert(ne);else if("undefined"===typeof md5){a=document.createElement("script");a.type="text/javascript";a.src="https://cdnjs.cloudflare.com/ajax/libs/blueimp-md5/2.10.0/js/md5.min.js";a.onload=a.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||(md5(l)!=h.pwd?alert(ne):(delete h.pwd,Ua.one("transitionend",function(){Ua.css("display","none")}).removeClass("mvp-holder-visible"),wd.val(""),"video"==
e&&M?(Aa.hide(),M.remove(),M=null,xa()):Lb(!0)))};a.onerror=function(){alert("Error loading "+this.src)};var f=document.getElementsByTagName("script")[0];f.parentNode.insertBefore(a,f)}else md5(l)!=h.pwd?alert(ne):(delete h.pwd,Ua.one("transitionend",function(){Ua.css("display","none")}).removeClass("mvp-holder-visible"),wd.val(""),"video"==e&&M?(Aa.hide(),M.remove(),M=null,xa()):Lb(!0))}else if(a.hasClass("mvp-previous-toggle"))Oc();else if(a.hasClass("mvp-next-toggle"))Jb();else if(a.hasClass("mvp-loop-toggle"))N.setLooping();
else if(a.hasClass("mvp-shuffle-toggle"))N.setRandom();else if(a.hasClass("mvp-share-toggle"))vd();else if(a.hasClass("mvp-pip-toggle"))if(rf)if(document.pictureInPictureElement)try{document.exitPictureInPicture()}catch(D){}else try{p.requestPictureInPicture()}catch(D){}else p.webkitSupportsPresentationMode&&"function"===typeof p.webkitSetPresentationMode&&p.webkitSetPresentationMode("picture-in-picture"===p.webkitPresentationMode?"inline":"picture-in-picture");else a.hasClass("mvp-share-item")&&
A(a.attr("data-type").toLowerCase())}function sf(a){a.preventDefault();if(!u)return!1;a=b(a.currentTarget);if(S&&S.is(a))return!1;oe=!0;a=t.find(".mvp-playlist-item").index(a);N.processPlaylistRequest(a);b(q).trigger("clickPlaylistItem",{instance:q,instanceName:P});tf?(a=H.offset().top,Sa.scrollTop()>a&&b("html,body").animate({scrollTop:a},500)):fa&&I.hasClass("mvp-playlist-holder-bottom")&&(a=H.offset().top,Sa.scrollTop()>a&&b("html,body").animate({scrollTop:a},500))}function uf(a){a.preventDefault();
if(!u)return!1;a=b(a.currentTarget);if(!fa&&a.attr("data-hover-preview")){var l=a.find(".mvp-thumbimg");l.attr("data-src",l.attr("src")).attr("src",a.attr("data-hover-preview"))}if(S&&S.is(a))return!1;a.addClass("mvp-playlist-item-selected")}function vf(a){a.preventDefault();if(!u)return!1;a=b(a.currentTarget);if(!fa&&a.attr("data-hover-preview")){var l=a.find(".mvp-thumbimg");l.attr("src",l.attr("data-src"))}if(S&&S.is(a))return!1;a.removeClass("mvp-playlist-item-selected")}function Sc(){S.removeClass("mvp-playlist-item-selected");
b(q).trigger("playlistItemEnabled",{instance:q,instanceName:P});S=null}function Ng(){S&&Sc();tb=N.getCounter();S=t.children(".mvp-playlist-item").eq(tb);if(S.length){S.addClass("mvp-playlist-item-selected");if(mb&&0<E){if(!oe)if("scroll"==pa)if("undefined"!==typeof mCustomScrollbar)"horizontal"==na?Z.mCustomScrollbar("scrollTo",parseInt(S.position().left),{scrollInertia:500}):Z.mCustomScrollbar("scrollTo",parseInt(S.position().top),{scrollInertia:500});else var a=setInterval(function(){"undefined"!==
typeof mCustomScrollbar&&(clearInterval(a),"horizontal"==na?Z.mCustomScrollbar("scrollTo",parseInt(S.position().left),{scrollInertia:500}):Z.mCustomScrollbar("scrollTo",parseInt(S.position().top),{scrollInertia:500}))},500);else if("buttons"==pa){if("horizontal"==na)var l=I.width(),f=t.width(),c="translateX";else l=I.height(),f=t.height(),c="translateY";if(f<l)return;Ha.show();ya.show();var d=-t.find(".mvp-playlist-item").index(S)*qa;0<=d?(d=0,Ha.hide()):d<=l-f&&(d=l-f,ya.hide());Ia=d;t.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",
function(){Mb=!1}).css({"-webkit-transform":""+c+"("+d+"px)","-ms-transform":""+c+"("+d+"px)",transform:""+c+"("+d+"px)"})}oe=!1}b(q).trigger("playlistItemDisabled",{instance:q,instanceName:P})}}function Og(){e&&(R||"youtube"==e&&"default"==wa||"vimeo"==e&&"default"==ia||"iframe"==e||(Tc=window.setTimeout(function(){ea&&(Va.one("transitionend",function(){Wa=!0}).removeClass("mvp-player-controls-visible"),ma&&cb.removeClass("mvp-subtitle-visible"),"fullscreen"==ra&&(document.body.style.cursor="none"),
T.hide(),Rc.css("opacity",0))},Pg)))}function pe(a){!e||R||"youtube"==e&&"default"==wa||"vimeo"==e&&"default"==ia||"iframe"==e||(Tc&&clearTimeout(Tc),La&&Wa&&(Va.one("transitionend",function(){Wa=!1}).addClass("mvp-player-controls-visible"),ma&&cb.addClass("mvp-subtitle-visible"),"fullscreen"==ra&&(document.body.style.cursor="default")),ea&&Og())}function ud(a){ub.hasClass("mvp-holder-visible")&&ub.css("display","none").removeClass("mvp-holder-visible");G.removeClass("mvp-holder-visible")&&(G.removeClass("mvp-holder-visible").css({display:"none",
width:"auto",height:"auto"}),G.find(".mvp-settings-menu").css("display","none"),rb.css("display","block"));vb.hasClass("mvp-holder-visible")?(vb.one("transitionend",function(){vb.css("display","none")}).removeClass("mvp-holder-visible"),Zb&&(q.playMedia(),Zb=!1)):(ea&&(q.pauseMedia(),Zb=!0),vb.css("display","block"),setTimeout(function(){vb.addClass("mvp-holder-visible")},20))}function vd(a){vb.hasClass("mvp-holder-visible")&&vb.css("display","none").removeClass("mvp-holder-visible");G.removeClass("mvp-holder-visible")&&
(G.removeClass("mvp-holder-visible").css({display:"none",width:"auto",height:"auto"}),G.find(".mvp-settings-menu").css("display","none"),rb.css("display","block"));ub.hasClass("mvp-holder-visible")?(ub.one("transitionend",function(){ub.css("display","none")}).removeClass("mvp-holder-visible"),Zb&&(q.playMedia(),Zb=!1)):(ea&&(q.pauseMedia(),Zb=!0),ub.css("display","block"),setTimeout(function(){ub.addClass("mvp-holder-visible")},20))}function wf(a){W=!0;ja.show();Nb?qe():t.find(".mvp-playlist-item, .mvp-global-playlist-data").remove();
var l=xf?b(xf).find(a):b(a);if(0==l.length)return alert("Failed playlist selection! Playlist - "+a+" does not exist. Check activePlaylist option in settings!"),!1;l.find(".mvp-global-playlist-data").length&&(ha=l.find(".mvp-global-playlist-data"),ha.find(".mvp-ad-section").length&&(Uc=ha.find(".mvp-ad-section")),ha.find(".mvp-annotation-section").length&&(Vc=ha.find(".mvp-annotation-section")),void 0!=ha.attr("data-upnext-time")&&(Wc=parseInt(ha.attr("data-upnext-time"),10)),void 0!=ha.attr("data-pwd")&&
(Xc=ha.attr("data-pwd")),void 0!=ha.attr("data-display-poster-on-mobile")&&fa&&(Ob=!0,$b=db=aa=!1));xd=a;b(q).trigger("playlistStartLoad",{instance:q,instanceName:P});Yc=-1;ka=[];Ma=[];if(void 0!=l.attr("data-type")&&"xml"==l.attr("data-type"))Qg(wb(l));else{var f,c,d;l.children(".mvp-playlist-item").each(function(){c=b(this);d=c.attr("data-type");RegExp(/^audio|^video|^hls|^dash/).test(d)?Ma.push(c.clone()):void 0!=c.attr("data-noapi")?Ma.push(c.clone()):(f=wb(c),Ma.push(f))});E=Ma.length;Ba()}}
function Ja(a){"youtube"==a?(sa=new MVPYoutubeLoader(c),b(sa).on("MVPYoutubeLoader.END_LOAD",function(a,b){var c,d=b.data.length;for(c=0;c<d;c++){var f=b.data[c];ka.push(f)}X=b.nextPageToken;console.log(Na);Na?re():Ba()}),ac&&X&&(sa.setDataFromCache(wb(b(ac))),yd=!1)):"vimeo"==a&&(ta=new MVPVimeoLoader(c),b(ta).on("MVPVimeoLoader.END_LOAD",function(a,b){var c,d=b.data.length;for(c=0;c<d;c++){var f=b.data[c];ka.push(f)}X=b.nextPageToken;Na?re():Ba()}),ac&&X&&(ta.setDataFromCache(wb(b(ac))),yd=!1))}
function Ba(){Yc++;if(Yc>E-1)re();else{var a=Ma[Yc],b=a.type;b?RegExp(/^youtube/).test(b)?(xb="youtube",sa||Ja("youtube"),sa.setData(a)):RegExp(/^vimeo/).test(b)?(xb="vimeo",ta||Ja("vimeo"),ta.setData(a)):RegExp(/^folder/).test(b)?Rg(a):RegExp(/^iframe/).test(b)?(ka.push(a),Ba()):RegExp(/^audio|^video|^hls|^dash/).test(b)&&(ka.push(a),Ba()):(ka.push(a),Ba())}}function Rg(a){if("file:"==window.location.protocol)return console.log("Reading files from folders locally is not possible! This requires online server connection."),
Ba(),!1;var c=a.type;if("folder_video"==c)var f=["mp4"];else"folder_audio"==c&&(a.id3&&(se=bc=ka.length-1),f=["mp3","wav"]);b.ajax({type:"GET",url:yf+"includes/folder_parser.php",data:{type:f,dir:a.path,limit:a.limit||100},dataType:"json"}).done(function(f){MVPUtils.keysrt(f,"filename");var d,l=f.length;for(d=0;d<l;d++){var D=f[d];if("folder_audio"==c){if(/mp3|wav/.test(D.basename)){var e=b.extend(!0,{},a);e.type="audio";e.origtype="folder_audio";var h=D.fullpath;"mp3"==D.extension?e.path=[{quality:"default",
mp3:h}]:"wav"==D.extension&&(e.path=[{quality:"default",wav:h}]);zf&&(e.poster=h.substr(0,h.lastIndexOf("/")+1)+"poster/"+D.filename+".jpg");Af&&!e.thumb&&(e.thumb=h.substr(0,h.lastIndexOf("/")+1)+"thumb/"+D.filename+".jpg");e.share||(e.share=h);e.title||(e.title=D.filename);ka.push(e);bc++}}else"folder_video"==c&&/mp4/.test(D.basename)&&(e=b.extend(!0,{},a),e.type="video",e.origtype="folder_video",h=D.fullpath,e.path=[{quality:"default",mp4:h}],zf&&(e.poster=h.substr(0,h.lastIndexOf("/")+1)+"poster/"+
D.filename+".jpg"),Af&&!e.thumb&&(e.thumb=h.substr(0,h.lastIndexOf("/")+1)+"thumb/"+D.filename+".jpg"),e.share||(e.share=h),e.title||(e.title=D.filename),ka.push(e))}"folder_audio"==c?a.id3?zd():Ba():Ba()}).fail(function(a,b,c){console.log(a,b,c);Ba()})}function zd(){if("undefined"===typeof jsmediatags){var a=document.createElement("script");a.type="text/javascript";a.src="https://cdnjs.cloudflare.com/ajax/libs/jsmediatags/3.9.0/jsmediatags.min.js";a.onload=a.onreadystatechange=function(){this.readyState&&
"complete"!=this.readyState||zd()};a.onerror=function(){alert("Error loading "+this.src)};var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}else{var c=ka[bc];jsmediatags.read(c.path[0].mp3||c.path[0].wav,{onSuccess:function(a){var b=a.tags;a=b.picture;b.artist&&(c.artist=b.artist);b.title&&(c.title=b.title);b.album&&(c.album=b.album);if(a){b="";var f,l=a.data.length;for(f=0;f<l;f++)b+=String.fromCharCode(a.data[f]);c.thumb="data:"+a.format+";base64,"+window.btoa(b)}bc--;
bc>se?zd():Ba()},onError:function(a){console.log("ID3 error: ",a.type,a.info);bc--;bc>se?zd():Ba()}})}}function Qg(a){b.ajax({type:"GET",url:a.path,dataType:"html"}).done(function(a){var c,l,d;b(a).children(".mvp-playlist-item").each(function(){c=b(this);l=c.attr("data-type");RegExp(/^audio|^video|^hls|^dash/).test(l)?Ma.push(c):void 0!=c.attr("data-noapi")?Ma.push(c):(d=wb(c),Ma.push(d))});E=Ma.length;Ba()}).fail(function(a,b,c){console.log(a,b,c);Ba()})}function re(){var a,c=ka.length,f,e=0;console.log(ka);
for(a=0;a<c;a++){pc&&e++;var d=ka[a];console.log(d);var n=d.type;if(d instanceof b&&d.hasClass("mvp-playlist-item"))n=d;else{d.origclasses||(d.origclasses="mvp-playlist-item");n=b('<div class="'+d.origclasses+'"/>').attr("data-type",n);delete d.origclasses;var h=null;if("youtube"==d.type)d.thumbnails&&(d.thumbnails.medium?h=d.thumbnails.medium.url:d.thumbnails.high?h=d.thumbnails.high.url:d.thumbnails.standard&&(h=d.thumbnails.standard.url));else if("vimeo"==d.type){var g=d.pictures.sizes;var k=g.length;
for(f=0;f<k;f++)if(295==g[f].width){h=g[f].link;break}else if(640==g[f].width){h=g[f].link;break}}else h=d.thumb;h||(h=d.thumbDefault);h&&(f=b("<div/>").addClass("mvp-playlist-thumb").appendTo(n),g=d.alt?d.alt:d.title?d.title.replace(/"/g,"'"):"image",b(new Image).addClass("mvp-thumbimg").appendTo(f).attr({src:h,alt:g}),n.attr("data-thumb",h));if(d.title||d.description||d.publishedAt)for(h=b('<div class="mvp-playlist-info"></div>').appendTo(n),f=Bf.length,g=0;g<f;g++)k=Bf[g],"title"==k&&d.title?(k=
d.title.replace(/"/g,"'"),b('<span class="mvp-playlist-title">'+k+"</span>").appendTo(h),n.attr("data-title",k)):"date"==k&&d.date?(k=new Date(d.date),k=k.getMonth()+1+"/"+k.getDate()+"/"+k.getFullYear(),b('<span class="mvp-playlist-published-date">'+k+"</span>").appendTo(h)):"description"==k&&d.description&&(k=d.description.replace(/"/g,"'"),n.attr("data-description",k),0<Cf&&(k=k.substr(0,Cf)+"..."),b('<span class="mvp-playlist-description">'+k+"</span>").appendTo(h));if(d.subtitles)if(d.subtitles instanceof
b)n.append(d.subtitles);else if(d.subtitles.length)for(h=b('<div class="mvp-subtitles"></div>').appendTo(n),f=d.subtitles.length,g=0;g<f;g++){k=d.subtitles[g];var p='<div data-label="'+k.label+'" data-src="'+k.src+'"';p=k["default"]?p+" data-default></div>":p+"></div>";b(p).appendTo(h)}d.adSection&&n.append(d.adSection);d.annotationSection&&n.append(d.annotationSection);if("iframe"==d.type)n.attr("data-path",d.path);else if("video"==d.type||"audio"==d.type){f=d.path.length;p="[";for(g=0;g<f;g++)k=
d.path[g],p+='{"quality": "'+k.quality+'", "'+k.ext+'": "'+k.src+'"}',g<f-1&&(p+=",");p+="]";n.attr("data-path",p);d.defaultQuality&&n.attr("data-quality",d.defaultQuality)}d.deeplink&&n.attr("data-deeplink",d.deeplink);d.id&&n.attr("data-path",d.id);d.mp4&&n.attr("data-mp4",d.mp4);d.poster&&n.attr("data-poster",d.poster);d.download&&n.attr("data-download",d.download);d.share&&n.attr("data-share",d.share);d.start&&n.attr("data-start",d.start);d.end&&n.attr("data-end",d.end);d.aspectRatio&&n.attr("data-aspect-ratio",
d.aspectRatio);d.playbackRate&&n.attr("data-playback-rate",d.playbackRate);d.quality&&n.attr("data-quality",d.quality);d.origtype&&("folder_audio"==d.origtype||"folder_video"==d.origtype)&&n.attr("data-path",JSON.stringify(d.path));d.width&&n.attr("data-width",d.width);d.height&&n.attr("data-height",d.height);d.is360&&n.attr("data-is360","1");d.customContent&&(n.append(d.customContent),delete d.customContent);d.previewSeek&&n.attr("data-preview-seek",d.previewSeek);d.chapters&&n.attr("data-chapters",
d.chapters);d.endLink&&(n.attr("data-end-link",d.endLink),d.endTarget&&n.attr("data-end-target",d.endTarget));d.user&&d.user.account&&n.attr("data-user-account",d.user.account);d.pwd&&n.attr("data-pwd",d.pwd);d.liveStream&&n.attr("data-live-stream",d.liveStream)}if(pc){m?m.after(n):qc?n.appendTo(t):t.children("div").eq(Oa).before(n);var m=n}else n.appendTo(t);if(mb&&(n.on("click",sf),!fa))n.on("mouseenter",uf).on("mouseleave",vf)}Nb="exist";E=t.children(".mvp-playlist-item").length;console.log("playlistLength = ",
E);"horizontal"==na&&t.width(E*qa);pc?(a=N.getCounter(),N.setPlaylistItems(E,!1),Oa<=a&&(qc||N.reSetCounter(a+e)),Ad&&!fa&&(aa=!0),Bd?(Bd=!1,N.setCounter(Oa,!1)):Ad&&(eb=!1,N.setCounter(Oa,!1))):N.setPlaylistItems(E);b(q).trigger("playlistEndLoad",{instance:q,instanceName:P,nextPageToken:X});Tg()}function Df(){var a,b,c,h,d,n=!1;t.off("touchstart.ap touchmove.ap touchend.ap click.ap-touchclick").on("touchstart.ap",function(f){if(!u||W)return!1;f=f.originalEvent.touches[0];a=t.position().left;b=t.position().top;
c=f.pageX;h=f.pageY;d=!1;n=!0}).on("touchmove.ap",function(f){if(n){f=f.originalEvent.touches[0];Ha.show();ya.show();if("horizontal"==na){var l=a-c+f.pageX,g=I.width(),D=t.width();if(D<g)return;0<l?(l=0,Ha.hide()):l<=g-D&&(l=g-D,ya.hide(),yb&&X&&!W&&(W=!0,ja.show(),Na=!0,ka=[],"youtube"==e?(sa||Ja("youtube"),sa.resumeLoad(X)):"vimeo"==e&&(ta||Ja("vimeo"),ta.resumeLoad(X))));t.css("left",l+"px")}else{l=b-h+f.pageY;g=I.height();D=t.height();if(D<g)return;0<l?(l=0,Ha.hide()):l<=g-D&&(l=g-D,ya.hide(),
yb&&X&&!W&&(W=!0,ja.show(),Na=!0,ka=[],"youtube"==e?(sa||Ja("youtube"),sa.resumeLoad(X)):"vimeo"==e&&(ta||Ja("vimeo"),ta.resumeLoad(X))));t.css("top",l+"px")}d=d||5<Math.abs(c-f.pageX)||5<Math.abs(h-f.pageY);return!1}}).on("touchend.ap",function(a){n=!1}).on("click.ap-touchclick",function(a){if(d)return d=!1})}function Tg(){ja.hide();W=!1;if(!u){u=!0;if(Cd){var a=document.createElement("script");a.type="text/javascript";a.src="https://cdn.jsdelivr.net/npm/jquery-ui-sortable@1.0.0/jquery-ui.min.js";
a.onload=a.onreadystatechange=function(){if(!this.readyState||"complete"==this.readyState){var a=document.createElement("script");a.type="text/javascript";a.src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js";a.onload=a.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||t.sortable({helper:"clone"})};a.onerror=function(){alert("Error loading "+this.src)};var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,
b)}};a.onerror=function(){alert("Error loading "+this.src)};var l=document.getElementsByTagName("script")[0];l.parentNode.insertBefore(a,l)}mb&&!te&&q.checkPlaylistScroll();H.on("mousemove mousedown keypress DOMMouseScroll mousewheel touchmove MSPointerMove",pe);rc();b(q).trigger("setupDone",{instance:q,instanceName:P});g.css("opacity",1);Zc&&(ue=MVPUtils.getElementOffsetTop(g[0]),Sa.on(Ef,function(){sc||(sc=!0,ve?ea&&$c():$c(),setTimeout(function(){sc=!1},100))}))}tc&&Dd&&!yd&&Ff();if(mb){cc&&(Gf(),
we=Pb,t.find(".mvp-playlist-item").each(function(){if(0<Ca){var a=100/Pb;b(this).css({marginLeft:0,marginTop:0,marginRight:Ca+"px",marginBottom:Ca+"px",width:"calc("+a+"% - "+Ca+"px)"})}else b(this).css({marginLeft:0,marginTop:0,marginRight:Ca+"px",marginBottom:Ca+"px",width:100/Pb+"%"})}));var f=[];t.find(".mvp-thumbimg:not(.mvp-visible)").each(function(){f.push(b(this))});var e=0;a=f.length;for(l=0;l<a;l++)setTimeout(function(){clearTimeout(this);f[e].addClass("mvp-visible");e++},50+50*l);c.truncatePlaylistDescription&&
("undefined"!==typeof b.fn.dotdotdot?t.find(".mvp-playlist-info:not(.is-truncated)").each(function(){b(this).dotdotdot({watch:c.truncateWatch})}):(a=document.createElement("script"),a.type="text/javascript",a.src="https://cdnjs.cloudflare.com/ajax/libs/jQuery.dotdotdot/3.2.3/jquery.dotdotdot.js",a.onload=a.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||t.find(".mvp-playlist-info:not(.is-truncated)").each(function(){b(this).dotdotdot({watch:c.truncateWatch})})},a.onerror=
function(){alert("Error loading "+this.src)},l=document.getElementsByTagName("script")[0],l.parentNode.insertBefore(a,l)))}!Ed&&!pc&&0<E&&(a=c.activeItem,a>E-1&&(a=E-1),-1<a&&N.setCounter(a,!1),Ed=!0);pc=!1;Na&&(Na=!1,"buttons"==pa&&ya.show());ad&&(X?ad.css("opacity",1):(ad.remove(),ad=null))}function Gf(){var a=g.width(),b,c=cc.length;for(b=0;b<c;b++){var e=cc[b];a>e.width&&(Pb=e.column,Ca=e.gutter)}Z.css({paddingTop:Ca+"px",paddingLeft:Ca+"px"})}function Ug(){t.find(".mvp-global-playlist-data").length&&
(ha=t.find(".mvp-global-playlist-data").remove(),ha.find(".mvp-ad-section").length&&(Uc=ha.find(".mvp-ad-section")),ha.find(".mvp-annotation-section").length&&(Vc=ha.find(".mvp-annotation-section")),void 0!=ha.attr("data-upnext-time")&&(Wc=parseInt(ha.attr("data-upnext-time"),10)),void 0!=ha.attr("data-pwd")&&(Xc=ha.attr("data-pwd")),void 0!=ha.attr("data-display-poster-on-mobile")&&fa&&(Ob=!0,$b=db=aa=!1));E=t.children(".mvp-playlist-item").length;console.log("playlistLength: ",E);if(0<E){t.find(".mvp-playlist-item").each(function(){var a=
b(this).on("click",sf);if(!fa)a.on("mouseenter",uf).on("mouseleave",vf)});N.setPlaylistItems(E);Nb="exist";"horizontal"==na&&t.width(E*qa);var a=[];t.find(".mvp-thumbimg:not(.mvp-visible)").each(function(){a.push(b(this))});var l=0,f=a.length,e;for(e=0;e<f;e++)setTimeout(function(){clearTimeout(this);a[l].addClass("mvp-visible");l++},50+50*e);c.truncatePlaylistDescription&&("undefined"!==typeof b.fn.dotdotdot?t.find(".mvp-playlist-info:not(.is-truncated)").each(function(){b(this).dotdotdot({watch:c.truncateWatch})}):
(f=document.createElement("script"),f.type="text/javascript",f.src="https://cdnjs.cloudflare.com/ajax/libs/jQuery.dotdotdot/3.2.3/jquery.dotdotdot.js",f.onload=f.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||t.find(".mvp-playlist-info:not(.is-truncated)").each(function(){b(this).dotdotdot({watch:c.truncateWatch})})},f.onerror=function(){alert("Error loading "+this.src)},e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(f,e)))}u||(u=!0,Cd&&(f=document.createElement("script"),
f.type="text/javascript",f.src="https://cdn.jsdelivr.net/npm/jquery-ui-sortable@1.0.0/jquery-ui.min.js",f.onload=f.onreadystatechange=function(){if(!this.readyState||"complete"==this.readyState){var a=document.createElement("script");a.type="text/javascript";a.src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js";a.onload=a.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||t.sortable({helper:"clone"})};a.onerror=function(){alert("Error loading "+
this.src)};var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}},f.onerror=function(){alert("Error loading "+this.src)},e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(f,e)),mb&&!te&&q.checkPlaylistScroll(),H.on("mousemove mousedown keypress DOMMouseScroll mousewheel touchmove MSPointerMove",pe),rc(),b(q).trigger("setupDone",{instance:q,instanceName:P}),g.css("opacity",1),Zc&&(ue=MVPUtils.getElementOffsetTop(g[0]),Sa.on(Ef,function(){sc||(sc=!0,ve?
ea&&$c():$c(),setTimeout(function(){sc=!1},100))})));ja.hide();W=!1;b(q).trigger("playlistEndLoad",{instance:q,instanceName:P});f=c.activeItem;f>E-1&&(f=E-1);-1<f&&N.setCounter(f,!1);Ed=!0}function Fd(){MVPUtils.isScrolledIntoView(g[0])?(aa=dc=!0,q.playMedia()):uc=setInterval(function(){MVPUtils.isScrolledIntoView(g[0])&&(clearInterval(uc),uc=null,aa=dc=!0,q.playMedia())},400)}function $c(){MVPUtils.getScrollTop()>ue?g.hasClass(Gd)||g.addClass(Gd):g.hasClass(Gd)&&g.removeClass(Gd);rc()}function Vg(){bd=
[];var a,b=h.path.length;h.quality||(h.quality=h.path[0].quality);for(a=0;a<b;a++){var c=h.path[a];bd.push(c.quality);var g;a:for(g in c)if(c[g]==h.quality){"audio"==e?Hf&&c.wav?la=c.wav:Hf&&"wav"==c.ext?la=c.src:If&&c.mp3?la=c.mp3:If&&"mp3"==c.ext&&(la=c.src):"video"==e&&(Jf&&c.mp4?la=c.mp4:Jf&&"mp4"==c.ext&&(la=c.src));break a}}-1!=la.indexOf("ebsfm:")&&(la=atob(la.substr(6)))}function xa(a){cd=a;if(e&&!eb)if(cd){zb=!1;Pa&&cancelAnimationFrame(Pa);Qa&&clearInterval(Qa);Q=null;Ab&&(Ab.removeEventListener("change",
xe),Ab.reset());if("audio"==e)w&&(Q=w.currentTime,w.pause(),w.src=""),ec&&ec.off("ended pause play ratechange loadedmetadata error");else if("video"==e){Bb&&"video_360"==O&&fc&&fc.hide();if(p){Q=p.currentTime;p.pause();try{p.currentTime=0}catch(n){}p.src="";p=null}ua&&ua.off("ended loadedmetadata ratechange waiting playing play pause error seeked")}V.hide();La=ea=!1}else Qb();if(!cd&&!eb){h=Hd?Hd:vc?vc:wb(S);Hd=null;ye?wc&&(Id?(h=wb(Id),R=!0):xc&&dd&&(h=wb(xc),R=!0,xc=null)):(ye=!0,Uc?wc=Uc:h.adSection&&
(wc=h.adSection),wc&&(vc=h,wc.find(".mvp-ad").each(function(){var a=b(this);if(a.hasClass("mvp-ad-pre"))R=!0,h=wb(a);else if(a.hasClass("mvp-ad-mid")){var c=parseInt(a.attr("data-begin"),10);lb.push({begin:c,data:a})}else a.hasClass("mvp-ad-end")&&(xc=a)})));"youtube_single"==h.type?h.type="youtube":"vimeo_single"==h.type&&(h.type="vimeo");e=h.type;"video_360"==e&&(e="video",O="video_360");za=void 0!=h.aspectRatio?h.aspectRatio:c.aspectRatio;h.subtitles&&hf();if(!ze&&!R&&(ze=!0,Vc?ed=Vc:h.annotationSection&&
(ed=h.annotationSection),ed)){var l=0;ed.find(".mvp-annotation").each(function(){var a=b(this).clone().attr("data-id",l++).appendTo(Rb);a.hasClass("mvp-adsense-detail")?(b('<ins class="adsbygoogle" style="display:inline-block;width:'+a.attr("data-width")+"px;height:"+a.attr("data-height")+'px" data-ad-client="'+a.attr("data-ad-client")+'" data-ad-slot="'+a.attr("data-ad-slot")+'"></ins>').prependTo(a),Jd=!0):a.hasClass("mvp-adsense-code")&&(Jd=!0);yc.push({start:isNaN(parseInt(a.attr("data-show"),
10))?0:parseInt(a.attr("data-show"),10),end:isNaN(parseInt(a.attr("data-hide"),10))?1E5:parseInt(a.attr("data-hide"),10),item:a})});Rb.show();if(Jd)if("undefined"===typeof adsbygoogle){if("file:"!=window.location.protocol){var f=document.createElement("script");f.type="text/javascript";f.src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js";f.onload=f.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||Rb.find(".adsbygoogle").each(function(){(adsbygoogle=window.adsbygoogle||
[]).push({})})};f.onerror=function(){alert("Error loading "+this.src)};a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(f,a)}}else Rb.find(".adsbygoogle").each(function(){(adsbygoogle=window.adsbygoogle||[]).push({})})}h.chapters&&(Ig(),$a.addClass("mvp-seekbar-chapters"),Rc.css("display","block"));!fa&&h.previewSeek&&Lg();if(Wc&&!Kd&&(a=S.next(),0==a.length&&c.loopingOn&&(a=t.find(".mvp-playlist-item").eq(0)),a.length)){var g;void 0!=a.attr("data-thumb")?g=a.attr("data-thumb"):
a.find(".mvp-thumbimg").length&&(g=a.find(".mvp-thumbimg").attr("src"));var d;void 0!=a.attr("data-title")?d=a.attr("data-title"):a.find(".mvp-playlist-title").length&&(d=a.find(".mvp-playlist-title").html());if(g||d)g&&Ae.css("background-image","url("+g+")"),d&&Be.html(d),fb.addClass("mvp-upnext-on")}"lightbox"==Ta&&(gb.css("display","block"),"normal"==ra&&(g=Sb.width()/gc,Sb.height(g)),1!=gb.css("opacity")&&setTimeout(function(){clearTimeout(this);gb.css("opacity",1)},50));if("audio"==e){if(Aa||
(Aa=b('<div class="mvp-poster-holder"/>').appendTo(oa)),h.poster&&!eb){eb=!0;b(new Image).addClass("mvp-media").appendTo(Aa.show()).on("load",function(){M=b(this);MVPAspectRatio.resizeMedia("image",za,H,M);M.addClass("mvp-visible")}).on("error",function(a){console.log(a)}).attr({src:h.poster,alt:h.poster});if(Ob)return;if(!aa){V.show();return}}}else if(!("video"!=e&&"youtube"!=e&&"vimeo"!=e||db&&!dc||!h.poster||eb||zc)){eb=!0;Aa||(Aa=b('<div class="mvp-poster-holder"/>').appendTo(oa));b(new Image).addClass("mvp-media").appendTo(Aa.show()).on("load",
function(){M=b(this);MVPAspectRatio.resizeMedia("image",za,H,M);M.addClass("mvp-visible");Ob||V.show();ja.hide()}).on("error",function(a){console.log(a)}).attr({src:h.poster,alt:h.poster});!R&&h.pwd&&(Ua.css("display","block"),setTimeout(function(){Ua.addClass("mvp-holder-visible")},20));return}}eb&&(Q=h.start||0,eb=!1);fd&&!R&&(Q=fd,fd=null);c.playbackPositionTime&&(Q=c.playbackPositionTime,delete c.playbackPositionTime);if("audio"==e||"video"==e){if(Vg(),cd||Ld&&1==bd.length||bd.length&&x(bd,h.quality),
"video_360"==O&&"undefined"===typeof THREE){f=document.createElement("script");f.type="text/javascript";f.src="https://cdnjs.cloudflare.com/ajax/libs/three.js/105/three.min.js";f.onload=f.onreadystatechange=function(){if(!this.readyState||"complete"==this.readyState){var a=document.createElement("script");a.type="text/javascript";a.src="https://unpkg.com/three@0.85.0/examples/js/controls/OrbitControls.js";a.onload=f.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||Lb()};
a.onerror=function(){alert("Error loading "+this.src)};var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}};f.onerror=function(){alert("Error loading "+this.src)};a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(f,a);return}}else if("hls"==e){if(la=h.path,e="video",O="hls",!Kf){"undefined"===typeof Hls?(f=document.createElement("script"),f.type="text/javascript",f.src="https://cdn.jsdelivr.net/npm/hls.js@latest",f.onload=f.onreadystatechange=function(){this.readyState&&
"complete"!=this.readyState||(Lf(),Lb())},f.onerror=function(){alert("Error loading "+this.src)},a=document.getElementsByTagName("script")[0],a.parentNode.insertBefore(f,a)):(Lf(),Lb());return}}else if("dash"==e&&(la=h.path,e="video",O="dash",!Mf)){"undefined"===typeof dashjs?(f=document.createElement("script"),f.type="text/javascript",f.src="https://cdn.dashjs.org/latest/dash.all.min.js",f.onload=f.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||(Nf(),Lb())},f.onerror=
function(){alert("Error loading "+this.src)},a=document.getElementsByTagName("script")[0],a.parentNode.insertBefore(f,a)):(Nf(),Lb());return}Lb()}function Lb(a){if(!R&&h.pwd)Ua.css("display","block"),setTimeout(function(){Ua.addClass("mvp-holder-visible")},20);else{a&&($b||Md)&&(aa=!0);R&&(Va.css("display","none").removeClass("mvp-player-controls-visible"),Wa=!0,document.body.style.cursor="default");if("audio"==e)Of||(ec=b(document.createElement("audio")).attr("preload",Pf),w=ec[0],Of=!0),w.src=la,
ec.on("ended",function(){Ac()}).on("loadedmetadata",function(){h.playbackRate?w.playbackRate=Number(h.playbackRate):da(1);if(Ce)var a=setInterval(function(){3<=w.readyState&&(clearInterval(a),null!=Q?w.currentTime=Q:null!=h.start&&(w.currentTime=h.start))},100);else null!=Q?w.currentTime=Q:null!=h.start&&(w.currentTime=h.start);if(null!=Q){var b=w.play();void 0!==b&&b.then(function(){})["catch"](function(a){V.show();Va.css("display","none").removeClass("mvp-player-controls-visible");Wa=!0})}else aa?
(b=w.play(),void 0!==b&&b.then(function(){})["catch"](function(a){V.show();Va.css("display","none").removeClass("mvp-player-controls-visible");Wa=!0})):V.show();Q=null;db&&!dc&&Fd()}).on("play",function(){Nd()}).on("pause",function(){Od()}).on("ratechange",function(){da(w.playbackRate)}).on("error",function(a){b(q).trigger("mediaError",{instance:q,instanceName:P,counter:tb})}),aa&&w.load();else if("video"==e){h.posterFrameTime&&(la+="#t="+h.posterFrameTime);if(Qf)Cb.show(),ua=Cb.find(".mvp-media"),
p=ua[0];else{Cb||(Cb=b('<div class="mvp-video-holder"/>').appendTo(oa));var l=" playsinline";De&&(l="");a='<video class="mvp-media" preload="'+Pf+'"'+l+">";a+='<source src="'+la+'" />';a+="</video>";Cb.show().html(a);ua=Cb.find(".mvp-media");p=ua[0];zc&&k(0)}if(Bb&&"video_360"==O&&("file:"==window.location.protocol&&console.log("Playing 360 videos requires online server connection!"),!Rf)){Tb=new THREE.WebGLRenderer({antialias:!0});Tb.setSize(640,360);Tb.domElement.className+="mvp-canvas-video mvp-media";
oa.prepend(b(Tb.domElement));fc=oa.find(".mvp-canvas-video");Bc=new THREE.Texture(p);Bc.minFilter=THREE.LinearFilter;Bc.magFilter=THREE.LinearFilter;Bc.format=THREE.RGBFormat;Ee=new THREE.Scene;a=new THREE.SphereGeometry(500,60,40);a.scale(-1,1,1);var f=new THREE.MeshBasicMaterial({map:Bc});a=new THREE.Mesh(a,f);Ee.add(a);Rf=!0}ua.on("ended",function(){Ac()}).on("loadedmetadata",function(){Bb&&"video_360"==O||MVPAspectRatio.resizeMedia("video",za,H,ua);h.playbackRate?p.playbackRate=Number(h.playbackRate):
da(1);if(Ce)var a=setInterval(function(){3<=p.readyState&&(clearInterval(a),null!=Q?p.currentTime=Q:null!=h.start&&(p.currentTime=h.start))},100);else null!=Q?p.currentTime=Q:null!=h.start&&(p.currentTime=h.start);if(null!=Q){var b=p.play();void 0!==b&&b.then(function(){})["catch"](function(a){V.show();Va.css("display","none").removeClass("mvp-player-controls-visible");Wa=!0})}else aa?(b=p.play(),void 0!==b&&b.then(function(){})["catch"](function(a){V.show();Va.css("display","none").removeClass("mvp-player-controls-visible");
Wa=!0})):V.show();Q=null;ua.find("source").remove();db&&!dc&&Fd();(rf||p.webkitSupportsPresentationMode&&"function"===typeof p.webkitSetPresentationMode)&&Cc.show()}).on("canplaythrough",function(){Bb&&"video_360"==O?fc.addClass("mvp-visible"):("hls"==O&&MVPAspectRatio.resizeMedia("video",za,H,ua),ua.addClass("mvp-visible"))}).on("waiting",function(){fa&&"hls"==O||fa&&"dash"==O||ja.show()}).on("playing",function(){ja.hide()}).on("play",function(){Nd()}).on("pause",function(){Od()}).on("seeking",function(){zb=
!1}).on("seeked",function(){ja.hide();Bb&&"video_360"==O&&(zb=!0,Pa=requestAnimationFrame(Fe))}).on("ratechange",function(){da(p.playbackRate)}).on("error",function(a){switch(a.target.error.code){case a.target.error.MEDIA_ERR_ABORTED:console.log("You aborted the video playback.");break;case a.target.error.MEDIA_ERR_NETWORK:console.log("A network error caused the video download to fail part-way.");break;case a.target.error.MEDIA_ERR_DECODE:console.log("The video playback was aborted due to a corruption problem or because the video used features your browser did not support.");
break;case a.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:console.log("The video could not be loaded, either because the server or network failed or because the format is not supported.");break;default:console.log("An unknown error occurred.")}});if("hls"==O)if(Pd)U.attachMedia(p);else if(p.canPlayType("application/vnd.apple.mpegurl"))p.src=la;else if(h.mp4)p.src=h.mp4,p.load();else try{p.src=la,p.load()}catch(zh){alert("This browser or device does not support HLS extension. Please use mp4 video for playback!")}else"dash"==
O?Sf?Tf?Ka.attachSource(la):(Ka.initialize(p,la,aa),Tf=!0):h.mp4?(p.src=h.mp4,p.load()):alert("This browser or device does not support MPEG-DASH extension. Please use mp4 video for playback!"):(p.src=la,p.load());Qf=!0}else if("youtube"==e){if(Uf)He&&(a=0,null!=Q?a=Q:null!=h.start&&(a=h.start),aa?z.loadVideoById({videoId:h.path,startSeconds:a,endSeconds:h.end,suggestedQuality:h.quality}):z.cueVideoById({videoId:h.path,startSeconds:a,endSeconds:h.end,suggestedQuality:h.quality}));else{Ub=b('<div class="mvp-youtube-holder"/>').appendTo(oa);
a=window.location.href.split("/");a=a[0]+"//"+a[2];var g=c.youtubeNoCookie?"//www.youtube-nocookie.com/embed/":"//www.youtube.com/embed/";l="1";De&&(l="0");var d="ytplayer"+Math.floor(16777215*Math.random()),n="https:"==window.location.protocol?"https:":"http:",m="&controls=0",r="&color="+c.youtubePlayerColor,t="&showinfo=0",v="&modestbranding=1";f="&origin="+a;"chromeless"!=wa&&(m="&controls=1",t="&showinfo=1",v="&modestbranding=1");l=n+g+h.path+"?enablejsapi=1"+m+"&rel=0"+t+("&playsinline="+l)+
v+"&wmode=transparent&iv_load_policy=3&cc_load_policy=0"+r;/^http/.test(a)&&(l+=f);null!=Q?l+="&start="+Q:h.start&&(l+="&start="+h.start);h.end&&(l+="&end="+h.end);hb=b("<iframe/>",{id:d,frameborder:0,src:l,width:"100%",height:"100%",webkitAllowFullScreen:!0,mozallowfullscreen:!0,allowFullScreen:!0,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"}).addClass("mvp-media");"chromeless"==wa&&Ge&&hb.addClass("mvp-yt-clean");Ub.show().prepend(hb);window.YT||(a=document.createElement("script"),
a.src="https://www.youtube.com/iframe_api",f=document.getElementsByTagName("script")[0],f.parentNode.insertBefore(a,f));var u=setInterval(function(){window.YT&&window.YT.Player&&(u&&clearInterval(u),z=new YT.Player(d,{events:{onReady:Wg,onPlaybackQualityChange:Xg,onPlaybackRateChange:Yg,onStateChange:Zg,onError:$g}}))},100);Uf=!0}Ub.show();Ge||("chromeless"==wa?2==za&&h.width&&h.height&&(hb.sw=h.width,hb.sh=h.height,MVPAspectRatio.resizeMedia("iframe",za,Ub,hb)):hb.css({width:"100%",height:"100%"}))}else"vimeo"==
e?(ia="chromeless"==ah?h.userAccount?"basic"==h.userAccount?"default":"chromeless":"chromeless":"default","default"==ia?Vf?(ib=gd,Ra=hd,y=Wf,Xf&&(ib.show(),y.loadVideo(h.path),setTimeout(function(){clearTimeout(this);Qd()},500))):(gd||(gd=b('<div class="mvp-vimeo-holder-default"/>').appendTo(oa)),hd=Yf("0"),gd.show().append(hd),ib=gd,Ra=hd,window.Vimeo||(a=document.createElement("script"),a.src="https://player.vimeo.com/api/player.js",f=document.getElementsByTagName("script")[0],f.parentNode.insertBefore(a,
f)),u=setInterval(function(){window.Vimeo&&(u&&clearInterval(u),y=Wf=new Vimeo.Player(hd[0]),y.on("loaded",Qd),y.on("play",Ie),y.on("pause",Zf),y.on("ended",$f),y.on("error",ag),"chromeless"==ia&&(y.on("playbackratechange",bg),y.on("timeupdate",cg)),Xf=!0)},100),Vf=!0):(dg?(ib=id,Ra=jd,y=eg,fg&&(ib.show(),y.loadVideo(h.path),setTimeout(function(){clearTimeout(this);Qd()},500))):(id||(id=b('<div class="mvp-vimeo-holder-chromeless"/>').appendTo(oa)),jd=Yf("1"),id.show().append(jd),ib=id,Ra=jd,window.Vimeo||
(a=document.createElement("script"),a.src="https://player.vimeo.com/api/player.js",f=document.getElementsByTagName("script")[0],f.parentNode.insertBefore(a,f)),u=setInterval(function(){window.Vimeo&&(u&&clearInterval(u),y=eg=new Vimeo.Player(jd[0]),y.on("loaded",Qd),y.on("play",Ie),y.on("pause",Zf),y.on("ended",$f),y.on("error",ag),y.on("seeked",bh),"chromeless"==ia&&(y.on("playbackratechange",bg),y.on("timeupdate",cg)),fg=!0)},100),dg=!0),"chromeless"==ia&&2==za&&h.width&&h.height?(Ra.sw=h.width,
Ra.sh=h.height,MVPAspectRatio.resizeMedia("iframe",za,ib,Ra)):Ra.css({width:"100%",height:"100%"}))):"iframe"==e&&(Rd||(Rd=b('<div class="mvp-iframe-holder"/>').appendTo(oa)),b('<iframe src="'+h.path+'" style="border: 0px none transparent; width:100%; height:100%;" webkitAllowFullScreen mozallowfullscreen allowFullScreen allow="autoplay"></iframe>').appendTo(Rd.show()));if(!cd){if("audio"==e||"video"==e||"youtube"==e&&"chromeless"==wa||"vimeo"==e&&"chromeless"==ia)h.liveStream?(Dc.hide(),kd.hide(),
Ec.hide(),$a.hide()):(Dc.show(),kd.show(),Ec.show(),$a.show());(a=h.title||h.domTitle)&&gg.html(a);h.description?(hg.html(h.description),Fc.show()):Fc.hide();ch&&h.download?Sd.show().find("a").attr("href",h.download).attr("download",""):Sd.hide()}R?b(q).trigger("adRequest",{instance:q,instanceName:P,adId:h.adId}):b(q).trigger("mediaRequest",{instance:q,instanceName:P,counter:tb})}}function Wg(a){He=!0;zc&&k(0);aa?z.playVideo():(null!=Q&&h.poster&&z.playVideo(),hb.addClass("mvp-visible"));db&&!dc&&
Fd()}function Xg(a){ke(a.data)}function Yg(a){da(a.data)}function Zg(a){Ub.is(":visible")&&-1!=a.data&&(0==a.data?Td||(Td=!0,Ac()):1==a.data?(!Je&&(Td=!1,Q=null,h.quality&&z.setPlaybackQuality(h.quality),a=z.getAvailableQualityLevels(),Ld&&1==a.length||"chromeless"==wa&&x(a,z.getPlaybackQuality()),h.playbackRate&&1!=h.playbackRate?z.setPlaybackRate(Number(h.playbackRate)):"chromeless"==wa&&da(1),Ke&&(Gc||(Gc=b('<div class="mvp-iframe-blocker"></div>').css("display","block").appendTo(Ub))),Je=!0,$b||
Md)&&(aa=!0),Gc&&!h.is360&&Gc.css("display","block"),Nd()):2==a.data?(Gc&&Gc.css("display","none"),Od()):3==a.data?hb.addClass("mvp-visible"):5==a.data&&(aa||hb.addClass("mvp-visible")))}function $g(a){switch(a.data){case 2:console.log("Error code = "+a.data+": The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.");break;case 100:console.log("Error code = "+
a.data+": Video not found, removed, or marked as private");break;case 101:console.log("Error code = "+a.data+": Embedding disabled for this video");break;case 150:console.log("Error code = "+a.data+": Video not found, removed, or marked as private [same as error 100]")}}function Yf(a){var l=MVPUtils.rgbToHex(c.vimeoPlayerColor);"#"==l.charAt(0)&&(l=l.substr(1));var f="1";De&&(f="0");var e=$b?"1":"0",d="loop"==Hc?"1":"0",g="player"+Math.floor(16777215*Math.random());l="?color="+l;d="&loop="+d;f="&playsinline="+
f;var p="&muted=0";e="&autoplay="+e;a="&background="+a;zc&&(p="&muted=1",db?e="&autoplay=0":(e="&autoplay=1",aa=!0),k(0));l="https://player.vimeo.com/video/"+h.path+l+"&byline=1&portrait=1&title=1&autopause=1"+f+d+"&dnt=1"+a+"&speed=1"+p+e;h.quality&&(l+="&quality="+h.quality);return b("<iframe/>",{id:g,frameborder:0,src:l,width:"100%",height:"100%",webkitAllowFullScreen:!0,mozallowfullscreen:!0,allowFullScreen:!0,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"}).addClass("mvp-media")}
function Ie(){if(!Le){Ra.addClass("mvp-visible");if(h.start||null!=Q){if(null!=Q)var a=Q;else h.start&&(a=h.start);Q=null;y.setCurrentTime(a).then(function(a){})["catch"](function(a){console.log(a.name)})}h.playbackRate&&1!=h.playbackRate&&y.setPlaybackRate(h.playbackRate).then(function(a){})["catch"](function(a){});Le=!0;if($b||Md)aa=!0}Nd()}function Zf(){e&&"vimeo"!=e||Od()}function bg(a){da(a.playbackRate)}function Qd(){if(dh="default"==ia?!1:!0)Ud||(Ud=b('<div class="mvp-iframe-blocker"></div>').css("display",
"block").appendTo(ib)),h.is360?Ud.css("display","none"):Ud.css("display","block");aa?(y.play().then(function(){Ie()})["catch"](function(a){"chromeless"==ia&&V.show();Ra.addClass("mvp-visible")}),"chromeless"==ia&&V.show(),Ra.addClass("mvp-visible")):null!=Q&&h.poster?y.play():("chromeless"==ia&&V.show(),Ra.addClass("mvp-visible"));db&&!dc&&Fd()}function cg(a){nb=a.duration;Ic=a.seconds;Vd=a.percent}function $f(){Ac()}function bh(){ja.hide()}function ag(a){console.log("Vimeo Player Error!",a)}function xe(){Wd&&
(Wd=!1,setTimeout(function(){clearTimeout(this);Xd.hide()},1E3))}function Lf(){U=new Hls;Pd=Hls.isSupported();Kf=!0;Pd&&(U.subtitleDisplay=!1,U.subtitleTrack=-1,U.on(Hls.Events.MEDIA_ATTACHED,function(){U.loadSource(la)}),U.on(Hls.Events.MANIFEST_PARSED,function(a,b){if(ig){var c=[],l,d=b.levels.length;for(l=0;l<d;l++){var e=b.levels[l];e.width&&c.push({label:e.width+"x"+e.height+", "+Math.ceil(Math.round(e.bitrate/1E3))+"kbps",value:l.toString()})}c.push({label:"auto",value:"-1",selected:!0});Ld&&
1==c.length||x(c,"-1")}}),U.on(Hls.Events.MANIFEST_LOADED,function(a,b){}),U.on(Hls.Events.LEVEL_LOADED,function(a,b){}),U.on(Hls.Events.AUDIO_TRACKS_UPDATED,function(a,c){if(jg){var l=U.audioTracks,e=l.length;if(1<e){var d;for(d=0;d<e;d++){var h=l[d];var g=h.groupId+" - "+h.name;h=h.id.toString();b("<li/>").addClass("mvp-menu-item").attr({"data-value":h,"data-label":g}).text(g).on("click",gf).appendTo(Yd)}Zd=!0;kg.show();Me.removeClass("mvp-force-hide")}}}),U.on(Hls.Events.AUDIO_TRACK_SWITCHED,function(a,
b){if(Zd){var c=b.id;$d&&$d.removeClass("mvp-menu-active");$d=Yd.find(".mvp-menu-item[data-value='"+c+"']").addClass("mvp-menu-active");G.find(".mvp-audio-language-menu-value").text($d.text())}}),U.on(Hls.Events.AUDIO_TRACK_LOADED,function(a,b){}),U.on(Hls.Events.SUBTITLE_TRACK_SWITCH,function(a,b){var c=U.subtitleTracks.length;if(0<c&&!h.subtitles){var l;h.subtitles=[];for(l=0;l<c;l++){var d=U.subtitleTracks[l];var e=l.toString();e={label:d.name,value:e,src:d.url};d["default"]&&(e["default"]=!0);
h.subtitles.push(e)}hf()}}),U.on(Hls.Events.SUBTITLE_TRACK_LOADED,function(a,b){}),U.on(Hls.Events.ERROR,function(a,b){if(b.fatal)switch(b.type){case Hls.ErrorTypes.NETWORK_ERROR:console.log("fatal network error encountered, try to recover");U.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover");U.recoverMediaError();break;default:U.destroy()}}))}function Nf(){Ka=dashjs.MediaPlayer().create();Mf=!0;Ka.setFastSwitchEnabled=!0;Ka.on(dashjs.MediaPlayer.events.STREAM_INITIALIZED,
function(a){if(ig){var c=Ka.getBitrateInfoListFor("video"),f=[],e=c.length;for(a=0;a<e;a++){var d=c[a];d.width&&f.push({label:d.width+"x"+d.height+", "+Math.ceil(Math.round(d.bitrate/1E3))+"kbps",value:d.qualityIndex.toString()})}f.push({label:"auto",value:"-1",selected:!0});Ld&&1==f.length||x(f,"-1")}if(jg&&(c=Ka.getBitrateInfoListFor("audio"),e=c.length,1<e)){for(a=0;a<e;a++)d=c[a],f=Math.ceil(Math.round(d.bitrate/1E3))+"kbps",d=d.qualityIndex.toString(),b("<li/>").addClass("mvp-menu-item").attr({"data-value":d,
"data-label":f}).text(f).on("click",gf).appendTo(Yd);Zd=!0;kg.show();Me.removeClass("mvp-force-hide")}});Ka.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_REQUESTED,function(a){});Ka.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_RENDERED,function(a){});Ka.on(dashjs.MediaPlayer.events.TRACK_CHANGE_RENDERED,function(a){});Ka.on(dashjs.MediaPlayer.events.TEXT_TRACKS_ADDED,function(a){});Ka.on(dashjs.MediaPlayer.events.ERROR,function(a){console.log("dashjs.MediaPlayer.events.ERROR "+a.error+" : "+a.event.message)});
Ka.on(dashjs.MediaPlayer.events.PLAYBACK_ERROR,function(a){})}function Qb(){zb=!1;Pa&&cancelAnimationFrame(Pa);Qa&&clearInterval(Qa);uc&&(clearInterval(uc),uc=null);oa.find(".mvp-media").removeClass("mvp-visible");Xd.hide();Wd=!1;Pd&&"hls"==O&&U.detachMedia();Sf&&"dash"==O&&Ka.attachSource(null);Ab&&(Ab.removeEventListener("change",xe),Ab.reset());if("audio"==e)w&&(w.pause(),w.src=""),ec&&ec.off("ended pause play ratechange loadedmetadata error");else if("video"==e){Bb&&"video_360"==O&&fc&&fc.hide();
if(p){p.pause();try{p.currentTime=0}catch(a){}p.src="";p=null}ua&&ua.off("ended loadedmetadata ratechange waiting playing play pause error seeked");Cb&&Cb.hide()}else"youtube"==e?z&&(Td=!0,Ub.hide(),He&&z.stopVideo(),Je=!1):"vimeo"==e?(Vd=Ic=nb=0,y&&y.unload().then(function(){})["catch"](function(a){console.log(a)}),Le=!1,ib&&ib.hide()):"iframe"==e&&Rd.empty().hide();M&&(Aa.hide().empty(),M=null);R&&(R=!1,ld.removeClass("mvp-ad-skip-btn-visible"),Ne.hide(),lg.hide(),dd=Id=null,Oe.html(mg),Pe=!1);
Rb.hide().empty();yc=[];Jd=!1;Cc.hide();G.removeClass("mvp-holder-visible").css({display:"none",width:"auto",height:"auto"});G.find(".mvp-settings-menu").css("display","none");rb.css("display","block");Dc.hide();kd.hide();Ec.hide();Qc=null;ng.hide();cb.empty();Yb=!1;ab=[];td=[];Ga=ma=null;oc.empty();nf.addClass("mvp-force-hide");sd.empty();lf.addClass("mvp-force-hide");Yd.empty();Me.addClass("mvp-force-hide");Zd=!1;ma&&cb.removeClass("mvp-subtitle-visible");T.hide();pb=null;ob=[];Wb.hide();Zb=!1;
vb.css("display","none").removeClass("mvp-holder-visible");gg.html("");hg.html("");Fc.hide();ub.css("display","none").removeClass("mvp-holder-visible");V.hide();Db.find(".mvp-btn-play").show();Db.find(".mvp-btn-pause").hide();fb.removeClass("mvp-upnext-on mvp-upnext-visible");Ae.css("background-image","none");Be.html("");Ua.hide();wd.val("");Eb&&Eb.hide();h=O=e=Q=null;eb=La=ea=!1;og.width(0);pg.width(0);qg.width(0);le.width(0);Qe=!1}function Re(){u&&e&&(S&&Sc(),Qb(),N.reSetCounter(),Va.removeClass("mvp-player-controls-visible"),
"fullscreen"==ra&&(document.body.style.cursor="none"),Wa=!0)}function qe(){e&&Qb();t.find(".mvp-playlist-item").remove();E=0;N.reSetCounter();Ed=!1;xd="";Nb=null;Na=Mb=!1;Xc=Wc=Vc=Uc=ha=null;yb=Ob=!1}function Jb(){u&&0!=E&&N.advanceHandler(1,!0)}function Oc(){u&&0!=E&&N.advanceHandler(-1,!0)}function Nd(){ja.hide();V.hide();Db.find(".mvp-btn-play").hide();Db.find(".mvp-btn-pause").show();"custom"==qb&&(ae.find(".mvp-context-playback-play").hide(),ae.find(".mvp-context-playback-pause").show());if(!La){if($b||
Md)aa=!0;Zc&&ve&&$c();k();if(Bb&&"video_360"==O){Cb.hide();fc.show();Xd.show();Wd=!0;rg||(rg=!0,Fb=new THREE.PerspectiveCamera(90,640/360,.1,1E4),Fb.position.x+=.1,Ab=new THREE.OrbitControls(Fb,oa[0]),Ab.enableZoom=!1);Ab.addEventListener("change",xe);var a=oa.width(),c=oa.height();Tb.setSize(a,c);Fb.aspect=a/c;Fb.updateProjectionMatrix();zb=!0;Pa&&cancelAnimationFrame(Pa);Pa=requestAnimationFrame(Fe)}R?b(q).trigger("adStart",{instance:q,instanceName:P,adId:h.adId}):b(q).trigger("mediaStart",{instance:q,
instanceName:P,counter:tb});La=!0;R?(Va.css("display","none").removeClass("mvp-player-controls-visible"),document.body.style.cursor="default",Wa=!0,Ne.show()):(Ne.hide(),"youtube"==e&&"default"==wa||"vimeo"==e&&"default"==ia||"iframe"==e?(Va.css("display","none").removeClass("mvp-player-controls-visible"),Wa=!0):Va.css("display","block"))}if(eh&&1<mvp_mediaArr.length)for(c=mvp_mediaArr.length,a=0;a<c;a++)q!=mvp_mediaArr[a].inst&&mvp_mediaArr[a].inst.pauseMedia();if("audio"==e||"video"==e||"youtube"==
e&&"chromeless"==wa||"vimeo"==e&&"chromeless"==ia)Qa&&clearInterval(Qa),Qa=setInterval(pd,250);R?b(q).trigger("adPlay",{instance:q,instanceName:P,adId:h.adId}):b(q).trigger("mediaPlay",{instance:q,instanceName:P,counter:tb});ea=!0;Tc&&clearTimeout(Tc);pe()}function Od(){Qa&&clearInterval(Qa);ja.hide();Db.find(".mvp-btn-play").show();Db.find(".mvp-btn-pause").hide();"custom"==qb&&(ae.find(".mvp-context-playback-pause").hide(),ae.find(".mvp-context-playback-play").show());La?("audio"==e||"video"==e||
"youtube"==e&&"chromeless"==wa||"vimeo"==e&&"chromeless"==ia)&&V.show():"audio"!=e&&"video"!=e||V.show();R?b(q).trigger("adPause",{instance:q,instanceName:P,adId:h.adId}):b(q).trigger("mediaPause",{instance:q,instanceName:P,counter:tb});if(R&&h.link)if(h.target&&"_blank"==h.target)window.open(h.link);else{var a=h.link;Re();window.location=a;return}ea=!1}function Fe(){zb&&(ua.readyState===ua.HAVE_ENOUGH_DATA&&(Bc.needsUpdate=!0),Tb.render(Ee,Fb),Pa=requestAnimationFrame(Fe))}function pd(a){if("undefined"!==
typeof a||ea){var l;if("audio"==e){if(w){var f=w.currentTime,g=w.duration;if("undefined"!==typeof w.buffered&&0!=w.buffered.length){try{var d=w.buffered.end(w.buffered.length-1)}catch(Sg){}isNaN(d)||(l=d/Math.floor(w.duration))}}}else if("video"==e){if(p&&(f=p.currentTime,g=p.duration,"undefined"!==typeof p.buffered&&0!=p.buffered.length)){try{d=p.buffered.end(p.buffered.length-1)}catch(Sg){}isNaN(d)||(l=d/Math.floor(p.duration))}}else"youtube"==e?z&&(f=z.getCurrentTime(),g=z.getDuration(),l=z.getVideoLoadedFraction()):
"vimeo"==e&&(f=Ic,g=nb,l=Vd);if(MVPUtils.isNumber(f)&&MVPUtils.isNumber(g)){a=parseInt(f,10);if(R){if(a!=Qc&&(fh.html("&nbsp;(-"+MVPUtils.formatTime(g-a)+")"),0<a)){if(!Pe&&(Pe=!0,md=!1,nd=null,"undefined"!==typeof h.skipEnable)){nd=h.skipEnable;var k;dd?(d=S.next(),0==d.length&&c.loopingOn&&(d=t.find(".mvp-playlist-item").eq(0)),d.length&&(void 0!=d.attr("data-thumb")?k=d.attr("data-thumb"):d.find(".mvp-thumbimg").length&&(k=d.find(".mvp-thumbimg").attr("src")))):vc.thumb?k=vc.thumb:S.find(".mvp-thumbimg").length&&
(k=S.find(".mvp-thumbimg").attr("src"));k&&b('<img src="'+k+'" alt=""/>').appendTo(sg.empty().show());tg.show();ld.addClass("mvp-ad-skip-btn-visible")}null==nd||md||(a<nd?Oe.html(mg+"&nbsp;"+(nd-a).toString()):(md=!0,sg.hide(),tg.hide(),lg.show()))}l&&og.width(l*be);pg.width(f/g*be)}else{if(a!=Qc){if(h.end&&f>=h.end){"loop"!=Hc&&"rewind"!=Hc&&(Qa&&clearInterval(Qa),zb=!1,Pa&&cancelAnimationFrame(Pa));Ac();return}if(lb.length)for(d=lb.length,k=0;k<d;k++){var m=lb[k];if(a==m.begin){Qa&&clearInterval(Qa);
zb=!1;Pa&&cancelAnimationFrame(Pa);Id=m.data;fd=m.begin+1;gh&&(lb[k].marker.remove(),lb.splice(k,1));xa();return}}if(yc.length)for(d=yc.length,k=0;k<d;k++){m=yc[k];var q=m.start;var r=m.end;m=m.item;a>=q&&a<=r-1?m.mvpvisible||(m.hasClass("mvp-iframe")&&m.find("iframe").each(function(){b(this).attr("src",b(this).attr("data-src"))}),m.css("display","block"),m.mvpvisible=!0):m.mvpvisible&&(m.css("display","none"),m.hasClass("mvp-iframe")&&m.find("iframe").each(function(){b(this).attr("src","about:blank")}),
m.mvpvisible=!1)}if(Yb&&ab.length)for(d=ab.length,k=0;k<d;k++)m=ab[k],q=m.start,r=m.end,a>=q&&a<=r?ma||(ma=b('<div class="mvp-subtitle">'+m.text+"</div>"),Va.hasClass("mvp-player-controls-visible")&&cb.addClass("mvp-subtitle-visible"),ma.start=q,ma.end=r,cb.append(ma)):ma&&(a<ma.start||a>ma.end)&&(ma.remove(),ma=null);0<g&&(Kd||fb.hasClass("mvp-upnext-on")&&(a>g-Wc?fb.addClass("mvp-upnext-visible"):fb.removeClass("mvp-upnext-visible")));Dc.html(MVPUtils.formatTime(a));Ec.html(MVPUtils.formatTime(g))}l&&
1!=l&&qg.width(l*Za);le.width(f/g*Za)}Qe||(R?be=ug.width():Za=Kb.width(),Qe=!0);0<g&&!R&&(bb.length&&!Se&&("audio"==e||"video"==e||"youtube"==e&&"chromeless"==wa||"vimeo"==e&&"chromeless"==ia)&&(Jg(g),Se=!0),Te||(hh&&lb.length&&Kg(g),Te=!0));if(Gb&&!vg&&ma){l=cb.width();d=Gb.length;for(k=0;k<d;k++)if(f=Gb[k],l>f.width)var u=f.size;cb.css("fontSize",u+"px");vg=!0}Qc=a}}}function Ac(){R&&b(q).trigger("adEnd",{instance:q,instanceName:P,adId:h.adId});if("undefined"!==typeof h.endLink)if("_blank"==h.endTarget)window.open(h.endLink);
else{var a=h.endLink;Re();window.location=a;return}R&&!dd?xa():xc?(dd=!0,xa()):(b(q).trigger("mediaEnd",{instance:q,instanceName:P,counter:tb}),a=h.start||0,"next"==Hc?Jb():"loop"==Hc?"audio"==e?w&&(w.currentTime=a,w.play()):"video"==e?p&&(p.currentTime=a,p.play()):"youtube"==e?z&&(z.seekTo(a),z.playVideo()):"vimeo"==e&&y&&y.setCurrentTime(a):"rewind"==Hc&&("audio"==e?w&&(w.currentTime=a,w.pause()):"video"==e?p&&(p.currentTime=a,p.pause()):"youtube"==e?z&&(z.seekTo(a),z.pauseVideo()):"vimeo"==e&&
y&&(y.pause(),y.setCurrentTime(a))))}function rc(){if("left_bottom"==ba||"right_bottom"==ba)if(g.width()>ih){I.removeClass("mvp-playlist-holder-bottom").width(jh);var a=ca?g.width()-I.width():g.width();H.width(a);if("100%"==Jc){var c=g.height();H.height(c);I.height(c)}else c="fullscreen"==ra?g.height():a/gc,H.height(c),I.height(c),g.height(c)}else I.addClass("mvp-playlist-holder-bottom"),"100%"==Jc?(I.css({height:Ue,width:"100%"}),a=g.width(),c=ca?g.height()-I.height():g.height(),H.css({height:c,
width:a})):(a=g.width(),c=a/gc,H.css({height:c,width:a}),I.css({height:Ue,width:"100%"}),ca?g.height(c+I.height()):g.height(c),"fullscreen"==ra&&(ca?H.height(g.height()-I.height()):H.height(g.height())));else"left"==ba||"right"==ba?(a=ca?g.width()-I.width():g.width(),H.width(a),"100%"==Jc&&(c=g.height(),H.height(c))):"bottom"==ba||"top"==ba?"100%"==Jc?(a=ca?g.height()-I.height():g.height(),H.height(a)):(a=g.width(),c=a/gc,H.height(c),ca?g.height(c+I.height()):g.height(c),"fullscreen"==ra&&(ca?H.height(g.height()-
I.height()):H.height(g.height()))):"lightbox"==Ta?"normal"==ra&&(a=Sb.width(),c=a/gc,Sb.height(c)):"outer"==ba?"fullscreen"==ra?H.height(g.height()):(a=g.width(),c=a/gc,H.height(c)):"no-playlist"==ba&&(a=g.width(),c=a/gc,H.height(c),"fullscreen"==ra?H.height(g.height()):g.height(c));mb&&cc&&(Gf(),Pb!=we&&(we=Pb,t.find(".mvp-playlist-item").each(function(){if(0<Ca){var a=100/Pb;b(this).css({marginLeft:0,marginTop:0,marginRight:Ca+"px",marginBottom:Ca+"px",width:"calc("+a+"% - "+Ca+"px)"})}else b(this).css({marginLeft:0,
marginTop:0,marginRight:Ca+"px",marginBottom:Ca+"px",width:100/Pb+"%"})})));if(mb&&ca)if("buttons"==pa){if("horizontal"==na){a=Z.width();var f=t.width(),k="translateX"}else a=Z.height(),f=t.height(),k="translateY";if(f<a){Vb=!1;Ha.hide();ya.hide();var d=parseInt(a/2-f/2,10)}else Vb=!0,d=S?-t.find(".mvp-playlist-item").index(S)*qa:0,Ia?d=Ia:(d=t[0].style.transform.replace(/[^\d.]/g,""),d=parseInt(d)),0<d?(d=0,ya.show()):d<a-f?(d=a-f,Ha.show()):isNaN(d)&&!e&&ya.show();Ia=d;setTimeout(function(){t.css({"-webkit-transform":""+
k+"("+d+"px)","-ms-transform":""+k+"("+d+"px)",transform:""+k+"("+d+"px)"})},350)}else"hover"==pa&&("horizontal"==na?(a=Z.width(),f=t.width(),f<a?(Vb=!1,d=parseInt(a/2-f/2,10)):(Vb=!0,d=parseInt(t.css("left"),10),0<d?d=0:d<a-f&&(d=a-f)),t.css("left",d+"px")):(c=Z.height(),f=t.height(),f<c?(Vb=!1,d=parseInt(c/2-f/2,10)):(Vb=!0,d=parseInt(t.css("top"),10),0<d?d=0:d<c-f&&(d=c-f)),t.css("top",d+"px")));Za=Kb.width();be=ug.width();e&&("audio"==e?M&&MVPAspectRatio.resizeMedia("image",za,H,M):"video"==e?
Bb&&"video_360"==O?zb&&(a=oa.width(),c=oa.height(),Tb.setSize(a,c),Fb.aspect=a/c,Fb.updateProjectionMatrix()):M?MVPAspectRatio.resizeMedia("image",za,H,M):ua&&MVPAspectRatio.resizeMedia("video",za,H,ua):"youtube"==e?Ge||"chromeless"==wa&&2==za&&h.width&&h.height&&MVPAspectRatio.resizeMedia("iframe",za,Ub,hb):"vimeo"==e&&"chromeless"==ia&&2==za&&h.width&&h.height&&MVPAspectRatio.resizeMedia("iframe",za,ib,Ra));if(Kc)for(c=Kc.length,a=g.width(),f=0;f<c;f++){var n=Kc[f];a<n.width?(-1==n.elements.indexOf("seekbar")&&
$a.addClass("mvp-force-hide"),-1==n.elements.indexOf("play")&&Db.addClass("mvp-force-hide"),-1==n.elements.indexOf("time")&&(Dc.addClass("mvp-force-hide"),Ec.addClass("mvp-force-hide"),kd.addClass("mvp-force-hide")),-1==n.elements.indexOf("download")&&Sd.addClass("mvp-force-hide"),-1==n.elements.indexOf("pip")&&Cc.addClass("mvp-force-hide"),-1==n.elements.indexOf("share")&&Ve.addClass("mvp-force-hide"),-1==n.elements.indexOf("info")&&Fc.addClass("mvp-force-hide"),-1==n.elements.indexOf("next")&&We.addClass("mvp-force-hide"),
-1==n.elements.indexOf("previous")&&Xe.addClass("mvp-force-hide"),-1==n.elements.indexOf("volume")&&Ye.addClass("mvp-force-hide"),-1==n.elements.indexOf("volume_seekbar")&&Fa.addClass("mvp-force-hide"),-1==n.elements.indexOf("fullscreen")&&Da.addClass("mvp-force-hide"),-1==n.elements.indexOf("playlist")&&Hb.addClass("mvp-force-hide"),-1==n.elements.indexOf("annotations")&&Rb.addClass("mvp-force-hide"),-1==n.elements.indexOf("upnext")&&fb.addClass("mvp-force-hide"),-1==n.elements.indexOf("settings")&&
wg.addClass("mvp-force-hide")):(-1==n.elements.indexOf("seekbar")&&$a.removeClass("mvp-force-hide"),-1==n.elements.indexOf("play")&&Db.removeClass("mvp-force-hide"),-1==n.elements.indexOf("time")&&(Dc.removeClass("mvp-force-hide"),Ec.removeClass("mvp-force-hide"),kd.removeClass("mvp-force-hide")),-1==n.elements.indexOf("download")&&Sd.removeClass("mvp-force-hide"),-1==n.elements.indexOf("pip")&&Cc.removeClass("mvp-force-hide"),-1==n.elements.indexOf("share")&&Ve.removeClass("mvp-force-hide"),-1==
n.elements.indexOf("info")&&Fc.removeClass("mvp-force-hide"),-1==n.elements.indexOf("next")&&We.removeClass("mvp-force-hide"),-1==n.elements.indexOf("previous")&&Xe.removeClass("mvp-force-hide"),-1==n.elements.indexOf("volume")&&Ye.removeClass("mvp-force-hide"),-1==n.elements.indexOf("volume_seekbar")&&Fa.removeClass("mvp-force-hide"),-1==n.elements.indexOf("fullscreen")&&Da.removeClass("mvp-force-hide"),-1==n.elements.indexOf("playlist")&&Hb.removeClass("mvp-force-hide"),-1==n.elements.indexOf("annotations")&&
Rb.removeClass("mvp-force-hide"),-1==n.elements.indexOf("upnext")&&fb.removeClass("mvp-force-hide"),-1==n.elements.indexOf("settings")&&wg.removeClass("mvp-force-hide"))}if(Gb&&ma){a=cb.width();c=Gb.length;for(f=0;f<c;f++)if(n=Gb[f],a>n.width)var m=n.size;cb.css("fontSize",m+"px")}}function qf(){if(!u)return!1;ca?I.hide():I.show();ca=!ca;rc()}function wb(a){var c={};if("html"==(a.type?"data":"html")){c.origclasses=a.attr("class");c.type=a.attr("data-type");Xc?c.pwd=Xc:void 0==a.attr("data-pwd")||
MVPUtils.isEmpty(a.attr("data-pwd"))||(c.pwd=a.attr("data-pwd"));void 0!=a.attr("data-noapi")&&(c.noapi=!0);void 0!=a.attr("data-live-stream")&&(c.liveStream=!0);void 0==a.attr("data-alt")||MVPUtils.isEmpty(a.attr("data-alt"))||(c.alt=a.attr("data-alt"));void 0==a.attr("data-deeplink")||MVPUtils.isEmpty(a.attr("data-deeplink"))||(c.deeplink=a.attr("data-deeplink"));"audio"==c.type||"video"==c.type||"video_360"==c.type?c.path=a.data("path"):void 0==a.attr("data-path")||MVPUtils.isEmpty(a.attr("data-path"))||
(c.path=a.attr("data-path"),-1!=c.path.indexOf("ebsfm:")&&(c.path=atob(c.path.substr(6))));void 0==a.attr("data-mp4")||MVPUtils.isEmpty(a.attr("data-mp4"))||(c.mp4=a.attr("data-mp4"));void 0==a.attr("data-thumb")||MVPUtils.isEmpty(a.attr("data-thumb"))||(c.thumb=a.attr("data-thumb"));void 0==a.attr("data-title")||MVPUtils.isEmpty(a.attr("data-title"))||(c.title=a.attr("data-title"));a.find(".mvp-playlist-title").length&&(c.domTitle=a.find(".mvp-playlist-title").html());void 0==a.attr("data-description")||
MVPUtils.isEmpty(a.attr("data-description"))?a.find(".mvp-playlist-description").length&&(c.description=a.find(".mvp-playlist-description").html()):c.description=a.attr("data-description");void 0==a.attr("data-quality")||MVPUtils.isEmpty(a.attr("data-quality"))||(c.quality=a.attr("data-quality"));void 0==a.attr("data-download")||MVPUtils.isEmpty(a.attr("data-download"))||(c.download=a.attr("data-download"));void 0==a.attr("data-poster")||MVPUtils.isEmpty(a.attr("data-poster"))||(c.poster=a.attr("data-poster"));
void 0==a.attr("data-poster-frame-time")||MVPUtils.isEmpty(a.attr("data-poster-frame-time"))||(c.posterFrameTime=a.attr("data-poster-frame-time"));void 0==a.attr("data-start")||MVPUtils.isEmpty(a.attr("data-start"))||(c.start=Number(a.attr("data-start")));void 0==a.attr("data-end")||MVPUtils.isEmpty(a.attr("data-end"))||(c.end=Number(a.attr("data-end")));void 0==a.attr("data-duration")||MVPUtils.isEmpty(a.attr("data-duration"))||(c.duration=a.attr("data-duration"));void 0!=a.attr("data-playback-rate")&&
!MVPUtils.isEmpty(a.attr("data-playback-rate"))&&MVPUtils.isNumber(a.attr("data-playback-rate"))&&(c.playbackRate=Number(a.attr("data-playback-rate")));void 0==a.attr("data-aspect-ratio")||MVPUtils.isEmpty(a.attr("data-aspect-ratio"))||(c.aspectRatio=a.attr("data-aspect-ratio"));void 0!=a.attr("data-id3")&&(c.id3=!0);void 0==a.attr("data-share")||MVPUtils.isEmpty(a.attr("data-share"))||(c.share=a.attr("data-share"));void 0==a.attr("data-limit")||MVPUtils.isEmpty(a.attr("data-limit"))||(c.limit=Number(a.attr("data-limit")));
void 0==a.attr("data-width")||MVPUtils.isEmpty(a.attr("data-width"))||void 0==a.attr("data-height")||MVPUtils.isEmpty(a.attr("data-height"))||(c.width=parseInt(a.attr("data-width"),10),c.height=parseInt(a.attr("data-height"),10));void 0!=a.attr("data-is360")&&(c.is360=!0);void 0==a.attr("data-preview-seek")||MVPUtils.isEmpty(a.attr("data-preview-seek"))||(c.previewSeek=a.attr("data-preview-seek"));void 0==a.attr("data-user-id")||MVPUtils.isEmpty(a.attr("data-user-id"))||(c.user_id=a.attr("data-user-id"));
void 0==a.attr("data-sort")||MVPUtils.isEmpty(a.attr("data-sort"))||(c.sort=a.attr("data-sort"),void 0==a.attr("data-sort-direction")||MVPUtils.isEmpty(a.attr("data-sort-direction"))||(c.sortDirection=a.attr("data-sort-direction")));void 0==a.attr("data-user-account")||MVPUtils.isEmpty(a.attr("data-user-account"))||(c.userAccount=a.attr("data-user-account"));if(a.children(".mvp-subtitles").length)if(W)c.subtitles=a.children(".mvp-subtitles");else{var f=a.children(".mvp-subtitles");f.children("div").length&&
(c.subtitles=[],f.children("div").each(function(){var a=b(this),d=a.attr("data-label");d={label:d,value:d,src:a.attr("data-src")};void 0!=a.attr("data-default")&&(d["default"]=!0);c.subtitles.push(d)}))}a.find(".mvp-custom-playlist-item-content").length&&(c.customContent=a.find(".mvp-custom-playlist-item-content").html());void 0!=a.attr("data-chapters")&&(c.chapters=a.attr("data-chapters"));void 0==a.attr("data-link")||MVPUtils.isEmpty(a.attr("data-link"))||(c.link=a.attr("data-link"),void 0==a.attr("data-target")||
MVPUtils.isEmpty(a.attr("data-target"))?c.target="_blank":c.target=a.attr("data-target"));void 0==a.attr("data-end-link")||MVPUtils.isEmpty(a.attr("data-end-link"))||(c.endLink=a.attr("data-end-link"),c.endTarget="_blank",void 0==a.attr("data-end-target")||MVPUtils.isEmpty(a.attr("data-end-target"))||(c.endTarget=a.attr("data-end-target")));void 0==a.attr("data-skip-enable")||MVPUtils.isEmpty(a.attr("data-skip-enable"))||(c.skipEnable=Math.abs(parseInt(a.attr("data-skip-enable"),10)));void 0==a.attr("data-ad-id")||
MVPUtils.isEmpty(a.attr("data-ad-id"))||(c.adId=a.attr("data-ad-id"));a.children(".mvp-ad-section").length&&(c.adSection=a.children(".mvp-ad-section"));a.children(".mvp-annotation-section").length&&(c.annotationSection=a.children(".mvp-annotation-section"))}else c=b.extend(!0,{},a);void 0!=a.attr("data-load-more")&&(yb=!0,ac=a.wrap("<p>").parent().html());return c}function Ff(){var a={playlist:b.trim(t.html()),activePlaylist:xd,date:Math.floor(Date.now()/1E3)};yb&&X&&ac&&(a.loadMoreOnTotalScroll=
!0,a.nextPageToken=X,a.loadMoreItem=ac,a.loadMoreType=xb);localStorage.setItem(hc,JSON.stringify(a))}var g=b(this),oa=g.find(".mvp-media-holder").show(),I=g.find(".mvp-playlist-holder"),Z=g.find(".mvp-playlist-inner"),t=g.find(".mvp-playlist-content"),xg=g.find(".mvp-playlist-filter-msg"),ng=g.find(".mvp-subtitle-holder").css("display","none"),cb=g.find(".mvp-subtitle-holder-inner"),Rb=g.find(".mvp-annotation-holder").css("display","none"),H=g.find(".mvp-player-holder").show(),Cb,Ub,gd,id,Aa,Rd,Va=
g.find(".mvp-player-controls"),Db=g.find(".mvp-playback-toggle"),Dc=g.find(".mvp-media-time-current"),kd=g.find(".mvp-media-time-separator"),Ec=g.find(".mvp-media-time-total"),Wb=g.find(".mvp-preview-seek-wrap"),Fg=g.find(".mvp-preview-seek-inner"),Eg=g.find(".mvp-preview-seek-time-current"),$a=g.find(".mvp-seekbar"),Kb=g.find(".mvp-progress-bg"),qg=g.find(".mvp-load-level"),le=g.find(".mvp-progress-level"),Ye=g.find(".mvp-volume-wrapper"),mc=g.find(".mvp-volume-toggle"),Fa=g.find(".mvp-volume-seekbar"),
kc=g.find(".mvp-volume-bg"),Gg=g.find(".mvp-volume-level"),vb=g.find(".mvp-info-holder"),Fc=g.find(".mvp-info-toggle"),gg=g.find(".mvp-player-title"),hg=g.find(".mvp-player-desc"),Ua=g.find(".mvp-pwd-holder"),wd=g.find(".mvp-pwd-field"),ne=g.find(".mvp-pwd-error").text(),Hb=g.find(".mvp-playlist-toggle"),ja=g.find(".mvp-player-loader"),V=g.find(".mvp-big-play"),Ze=g.find(".mvp-loop-toggle"),$e=g.find(".mvp-shuffle-toggle"),Sd=g.find(".mvp-download-toggle"),Ve=g.find(".mvp-share-toggle"),ub=g.find(".mvp-share-holder"),
Ha=g.find(".mvp-nav-backward"),ya=g.find(".mvp-nav-forward"),Xd=g.find(".mvp-vr-info"),gb=g.find(".mvp-lightbox-wrap"),kh=g.find(".mvp-lightbox");g.find(".mvp-lightbox-inner");var Sb=g.find(".mvp-lightbox-content-inner"),lh=g.find(".mvp-lightbox-close"),mh=g.find(".mvp-lightbox-prev"),nh=g.find(".mvp-lightbox-next"),fb=g.find(".mvp-upnext-wrap"),Ae=g.find(".mvp-upnext-thumb"),Be=g.find(".mvp-upnext-title"),We=g.find(".mvp-next-toggle"),Xe=g.find(".mvp-previous-toggle"),yg=g.find(".mvp-settings-toggle"),
kf=g.find(".mvp-playback-rate-menu"),sd=g.find(".mvp-quality-menu"),lf=g.find(".mvp-quality-settings-menu"),oc=g.find(".mvp-subtitle-menu"),nf=g.find(".mvp-subtitle-settings-menu"),Yd=g.find(".mvp-audio-language-menu");g.find(".mvp-audio-language-menu-holder");var kg=g.find(".mvp-audio-language-toggle").hide(),Me=g.find(".mvp-audio-language-settings-menu"),Rc=g.find(".mvp-chapter-title"),Cc=g.find(".mvp-pip-toggle").hide(),Ne=g.find(".mvp-ad-seekbar"),ug=g.find(".mvp-ad-progress-bg"),og=g.find(".mvp-ad-load-level"),
pg=g.find(".mvp-ad-progress-level"),fh=g.find(".mvp-ad-info-time"),ld=g.find(".mvp-ad-skip-btn"),tg=g.find(".mvp-ad-skip-msg"),Oe=g.find(".mvp-ad-skip-msg-text"),mg=Oe.html(),lg=g.find(".mvp-ad-skip-msg-end"),sg=g.find(".mvp-ad-skip-thumb");c=b.extend(!0,{},{youtubePlayerType:"chromeless",blockYoutubeEvents:!0,vimeoPlayerType:"default",vimeoPlayerColor:"#00adef",blockVimeoEvents:!0,playerRatio:1.7777777,playlistBottomHeight:300,playlistSideWidth:290,preload:"auto",sourcePath:"",instanceName:"",thumbScrollValue:50,
youtubePlayerColor:"red",verticalBottomSepearator:750,subtitleOffText:"Disabled",sortableTracks:!1,useMobileNativePlayer:!1,hideQualityMenuOnSingleQuality:!0,aspectRatio:2,randomPlay:!1,loopingOn:!0,hidePlaylistOnFullscreenEnter:!0,playlistItemContent:"thumb,title,description",playbackPositionKey:"mvp-playback-position",rightClickContextMenu:"custom",focusVideoOnActive:!1,playlistOpened:!0,clickOnBackgroundClosesLightbox:!0,limitDescriptionText:100,showStreamVideoBitrateMenu:!1,showStreamAudioBitrateMenu:!1,
seekTime:10,seekToChapterStart:!1,createAdMarkers:!0,playAdsOnlyOnce:!1,showAnnotationsOnlyOnce:!1,playlistStorageKey:"mvp-playlist-storage",truncateWatch:!0,idleTimeout:2E3,caption_breakPointArr:[{width:0,size:18},{width:480,size:20},{width:768,size:22},{width:1024,size:24},{width:1280,size:36}],youtubeAppId:""},c);var q=this,fa=MVPUtils.isMobile(),tc=MVPUtils.hasLocalStorage(),yf=c.sourcePath,P=c.instanceName,xf=c.playlistList,Hc=c.mediaEndAction,oh=c.useKeyboardNavigationForPlayback,K=c.volume,
aa=c.autoPlay,db=c.autoPlayInViewport,Md=c.autoPlayAfterFirst,$b=aa,zc=c.forceMutedAutoplay,ca=c.playlistOpened,za,Ld=c.hideQualityMenuOnSingleQuality,eh=c.togglePlaybackOnMultipleInstances,Cd=c.sortableTracks,Pf=c.preload,gc=c.playerRatio,af=c.hidePlaylistOnFullscreenEnter,Lc,Zc=c.minimizeOnScroll,ve=c.minimizeOnScrollOnlyIfPlaying,Gd=c.minimizeClass,Ue=c.playlistBottomHeight,jh=c.playlistSideWidth,Ke=c.blockYoutubeEvents,dh=c.blockVimeoEvents,wa=c.youtubePlayerType,ah=c.vimeoPlayerType,cc=c.breakPointArr,
ih=c.verticalBottomSepearator,Kc=c.elementsVisibilityArr,Pc=c.subtitleOffText,gh=c.playAdsOnlyOnce,ph=c.showAnnotationsOnlyOnce,ic=c.playbackPositionKey,zg=c.rememberPlaybackPosition&&tc&&ic,De=c.useMobileNativePlayer,Ag=c.useSwipeNavigation&&"ontouchstart"in window,Cf=c.limitDescriptionText,Bf=c.playlistItemContent.replace(/\s+/g,"").split(","),Gb=c.caption_breakPointArr,qb=c.rightClickContextMenu,tf=c.focusVideoOnActive,mb=!0,Ta="normal",ig=c.showStreamVideoBitrateMenu,jg=c.showStreamAudioBitrateMenu,
Ib=c.seekTime,hh=c.createAdMarkers,Ge=c.forceYoutubeChromeless,hc=c.playlistStorageKey,Dd=c.cacheTime,pf=c.seekToChapterStart,Pg=c.idleTimeout,qh=c.clickOnBackgroundClosesLightbox,zf=c.requirePosterFromFolder,Af=c.requireThumbnailsFromFolder,Ea=g.attr("class").split(/\s+/),Jc="normal";-1<Ea.indexOf("mvp-layout-100")&&(Jc="100%");var pa="none";-1<Ea.indexOf("mvp-nt-scroll")?pa="scroll":-1<Ea.indexOf("mvp-nt-buttons")?pa="buttons":-1<Ea.indexOf("mvp-nt-hover")&&(pa="hover");var na="vertical";if(-1<
Ea.indexOf("mvp-ht")||-1<Ea.indexOf("mvp-hb"))na="horizontal";var ba="right_bottom";-1<Ea.indexOf("mvp-vlb")?ba="left_bottom":-1<Ea.indexOf("mvp-vl")?ba="left":-1<Ea.indexOf("mvp-vr")?ba="right":-1<Ea.indexOf("mvp-ht")?ba="top":-1<Ea.indexOf("mvp-hb")?ba="bottom":-1<Ea.indexOf("mvp-vb")?ba="bottom":-1<Ea.indexOf("mvp-wall")?(ba="wall",Ta="lightbox",Hb.remove()):-1<Ea.indexOf("mvp-outer")?ba="outer":-1<Ea.indexOf("mvp-no-playlist")&&(ba="no-playlist",mb=!1,I.remove(),Hb.remove());"outer"==ba&&(af=
!1,tf=!0);"default"==wa?Ke=!1:Ag&&(Ke=!0);"100%"==Jc&&(Zc=db=!1);"lightbox"==Ta&&(Zc=db=!1,ca=!0);cc&&cc.length&&MVPUtils.keysrt(cc,"width");Kc&&Kc.length&&MVPUtils.keysrt(Kc,"width");Gb&&Gb.length&&MVPUtils.keysrt(Gb,"width");var Ce=MVPUtils.isIOS(),rh=MVPUtils.isiPhoneIpod();MVPUtils.isAndroid();var sh=MVPUtils.hasFullscreen(),ch=MVPUtils.hasDownloadSupport(),th=MVPUtils.volumeCanBeSet(),uh=MVPUtils.supportsWebGL(),Jf=MVPUtils.canPlayMp4(),If=MVPUtils.canPlayMp3(),Hf=MVPUtils.canPlayWav(),vh=MVPUtils.isChrome(),
wh=MVPUtils.isSafari(),rf=document.pictureInPictureEnabled,u=!1,W=!0,Na;q=this;var bf=b("body"),Sa=b(window),Ya=b(document),ce=b("html"),cf,Bg=100,La,tb,Qa,Pa,h,Hd,vc,S,E,Ef="scroll."+P,pb,ob=[],U,Pd,Zd,Kf,Ka,Sf=window.MediaSource,Mf,Tf,bc,se,Of,ec,w,M,eb,p,ua,Qf,sa,hb,z,Uf,He,Je,Td,Gc,ta,Ra,y,ib,ia,Wf,eg,Vf,dg,hd,jd,Xf,fg,Le,nb=0,Ic=0,Vd=0,Ud,Bb=!0,Wd,Rf,fc,Tb,Bc,Ee,zb,Fb,Ab,rg,xh=c.thumbScrollValue,Vb=!0,Mb,Ia,uc,dc,ue,sc,cd,bd=[],Q,e,O,la,ea,oe,Zb,Wa=!0,Tc,Nb,Ed,Yc,ka=[],Ma=[],ha,Wc,Kd,Ob,rd,sb,
$d,Ga,Yb,td=[],ab=[],ma,vg,qc,Oa,pc,Ad,Bd,te,Pb,Ca,we,bb=[],Se,Qe,wc,Uc,be=0,fd,ye,R,Id,lb=[],xc,dd,nd,md,Pe,Te,yc=[],Qc=null,ze,ed,Vc,Jd,Xc;window.playlistScrollLoading=!1;"scroll"==pa&&MVPUtils.checkCssExist(MVPUtils.qualifyURL(yf+"css/jquery.mCustomScrollbar.css"));"undefined"===typeof window.mvp_mediaArr&&(window.mvp_mediaArr=[]);mvp_mediaArr.push({inst:q,id:P});0==t.length&&(t=b('<div style="display:none;"></div>'),ba="no-playlist",mb=!1,pa="none",Cd=!1);var ad=g.find(".mvp-load-more-btn").on("click",
function(){if(!u||Na)return!1;q.loadMore();ad.css("opacity",0)});if(Ag)if("undefined"===typeof b.fn.swipe){var Mc=document.createElement("script");Mc.type="text/javascript";Mc.src="https://cdnjs.cloudflare.com/ajax/libs/jquery.touchswipe/1.6.19/jquery.touchSwipe.min.js";Mc.onload=Mc.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||r()};Mc.onerror=function(){alert("Error loading "+this.src)};var Cg=document.getElementsByTagName("script")[0];Cg.parentNode.insertBefore(Mc,
Cg)}else r();if("lightbox"==Ta){lh.on("click",function(){gb.one("transitionend",function(){gb.css("display","none")}).css("opacity",0);e&&Qb();S&&Sc()});if(qh)kh.on("click",function(a){a.target==this&&(gb.one("transitionend",function(){gb.css("display","none")}).css("opacity",0),e&&Qb(),S&&Sc())});mh.on("click",function(a){a.stopImmediatePropagation();Oc()});nh.on("click",function(a){a.stopImmediatePropagation();Jb()})}wh&&(Bg=500);fa&&(Cd=aa=!1);zc&&(aa=!0);db&&(aa=!1,zc=!0);mb||(ca=!1,I.css({width:0,
height:0}).hide());ca?I.show():I.hide();rh&&Cc.remove();uh||(Bb=!1,Xd.remove(),vh&&console.log("Turn Hardware Acceleration On Within Chrome Browser to enable 360 videos!"));"bottom"==ba&&"vertical"==na&&I.css({height:Ue});var de=b('<div class="mvp-playlist-item"></div>').prependTo(g);var qa="horizontal"==na?de.outerWidth(!0):de.outerHeight(!0);de.remove();de=null;zg&&(window.attachEvent||window.addEventListener)(Ce?"pagehide":"beforeunload",function(a){window.event&&(window.event.cancelBubble=!0);
if(!u||!e)return!1;a={volume:K,activeItem:tb,resumeTime:parseInt(q.getCurrentTime(),10)};localStorage.setItem(ic,JSON.stringify(a))});fb.find(".mvp-upnext-close").on("click",function(){fb.removeClass("mvp-upnext-on mvp-upnext-visible");Kd=!0});Ae.on("click",function(){fb.removeClass("mvp-upnext-on mvp-upnext-visible");Jb()});Be.on("click",function(){fb.removeClass("mvp-upnext-on mvp-upnext-visible");Jb()});ld.on("click",function(){if(!u||!R||!md)return!1;R&&b(q).trigger("adSkip",{instance:q,instanceName:P,
adId:h.adId});Ac()});Rb.on("click",".mvp-annotation-close",function(){var a=b(this).attr("data-id");ph?(b(this).parent().remove(),yc.splice(a,1)):b(this).parent().hide()});if("ontouchstart"in window){var df=!0;var ee="touchstart.ap mousedown.ap";var kb="touchmove.ap mousemove.ap";var jc="touchend.ap mouseup.ap"}else window.PointerEvent?(ee="pointerdown.ap",kb="pointermove.ap",jc="pointerup.ap"):(ee="mousedown.ap",kb="mousemove.ap",jc="mouseup.ap");oa.on("click",function(a){if(!u||Ob||"video_360"==
O)return!1;Wa?La?R&&q.togglePlayback():q.togglePlayback():q.togglePlayback()});g.find(".mvp-search-field").on("keyup.apfilter",function(){if(0==E)return!1;var a=b(this).val(),c,f=0;for(c=0;c<E;c++){var e=t.children(".mvp-playlist-item").eq(c).find(".mvp-playlist-title").html();-1<e.toLowerCase().indexOf(a)?t.children(".mvp-playlist-item").eq(c).show():(t.children(".mvp-playlist-item").eq(c).hide(),f++)}f==E?xg.show():xg.hide()});var ra="normal",ef;Ya.on("fullscreenchange mozfullscreenchange MSFullscreenChange webkitfullscreenchange",
function(a){ef==P&&("fullscreen"==ra?(ra="normal",ce.removeClass("mvp-fs-overflow"),g.removeClass("mvp-fs"),"lightbox"==Ta&&Sb.removeClass("mvp-fs"),Da.find(".mvp-btn-fullscreen").show(),Da.find(".mvp-btn-normal").hide(),"custom"==qb&&(fe.find(".mvp-context-fullscreen-enter").show(),fe.find(".mvp-context-fullscreen-exit").hide()),Lc&&!ca&&(Lc=!1,I.show(),ca=!0),"outer"==ba&&Hb.show(),ef=null,b(q).trigger("fullscreenExit",{instance:q,instanceName:P})):(ra="fullscreen",ce.addClass("mvp-fs-overflow"),
g.addClass("mvp-fs"),"lightbox"==Ta&&Sb.addClass("mvp-fs"),Da.find(".mvp-btn-fullscreen").hide(),Da.find(".mvp-btn-normal").show(),"custom"==qb&&(fe.find(".mvp-context-fullscreen-enter").hide(),fe.find(".mvp-context-fullscreen-exit").show()),af&&ca&&(Lc=!0,I.hide(),ca=!1),"outer"==ba&&Hb.hide(),b(q).trigger("fullscreenEnter",{instance:q,instanceName:P})))});var Da=g.find(".mvp-fullscreen-toggle").on("click",function(a){ef=P;a=g[0];"normal"==ra&&b(q).trigger("fullscreenBeforeEnter",{instance:q,instanceName:P});
sh?a.requestFullscreen?document.fullscreenElement?document.exitFullscreen():a.requestFullscreen():a.webkitRequestFullScreen?document.webkitIsFullScreen?document.webkitCancelFullScreen():a.webkitRequestFullScreen():a.msRequestFullscreen?document.msIsFullscreen||document.msFullscreenElement?document.msExitFullscreen():a.msRequestFullscreen():a.mozRequestFullScreen&&(document.fullscreenElement||document.mozFullScreenElement?document.mozCancelFullScreen():a.mozRequestFullScreen()):("fullscreen"==ra?(ra=
"normal",ce.removeClass("mvp-fs-overflow"),g.removeClass("mvp-fs"),"lightbox"==Ta&&Sb.removeClass("mvp-fs"),document.body.style.cursor="default",Da.find(".mvp-btn-fullscreen").show(),Da.find(".mvp-btn-normal").hide(),Lc&&!ca&&(Lc=!1,I.show(),ca=!0),"outer"==ba&&Hb.show(),b(q).trigger("fullscreenExit",{instance:q,instanceName:P})):(ra="fullscreen",ce.addClass("mvp-fs-overflow"),g.addClass("mvp-fs"),"lightbox"==Ta&&Sb.addClass("mvp-fs"),Da.find(".mvp-btn-fullscreen").hide(),Da.find(".mvp-btn-normal").show(),
af&&ca&&(Lc=!0,I.hide(),ca=!1),"outer"==ba&&Hb.hide(),b(q).trigger("fullscreenEnter",{instance:q,instanceName:P})),rc())});Da.find(".mvp-btn-normal").hide();Da.find(".mvp-btn-fullscreen").show();if("disabled"==qb)g.on("contextmenu",function(){return!1});else if("custom"==qb){var Nc=function(){bf.off("click.apcc",Nc);Eb.hide()},Eb=H.find(".mvp-context-menu").on("contextmenu",function(a){return!1}),ae=Eb.find(".mvp-context-playback").on("click",function(a){q.togglePlayback()}),fe=Eb.find(".mvp-context-fullscreen").on("click",
function(a){Da.click()}),nc=Eb.find(".mvp-context-volume").on("click",function(a){m()});H.on("contextmenu",function(a){if(Ob||b(a.target).hasClass("mvp-volume-level")||b(a.target).hasClass("mvp-volume-bg")||b(a.target).hasClass("mvp-progress-level")||b(a.target).hasClass("mvp-progress-bg")||b(a.target).hasClass("mvp-load-level")||"block"==Ua.css("display")||R)return!1;a.preventDefault();a.stopPropagation();var c=H[0].getBoundingClientRect(),f=Eb.outerWidth(!0),e=Eb.outerHeight(!0),d=parseInt(a.pageX-
Sa.scrollLeft()-c.left,10);a=parseInt(a.pageY-Sa.scrollTop()-c.top,10);d>H.width()-f&&(d-=f);a>H.height()-e&&(a-=e);Eb.css({left:d+"px",top:a+"px"}).show();bf.one("click.apcc",Nc)}).on("mouseleave",Nc);bf.on("mouseleave",Nc);Ya.on("contextmenu",Nc).keyup(function(a){27==a.keyCode&&Nc()})}var T=g.find(".mvp-tooltip");if(!fa)g.find("[data-tooltip]").on("mouseenter",function(a){a=b(this);var c=a.attr("data-tooltip");if(!MVPUtils.isEmpty(c)){var f=g[0].getBoundingClientRect(),e=a[0].getBoundingClientRect();
T.text(c);if(void 0!=a.attr("data-tooltip-position"))if("left"==a.attr("data-tooltip-position"))var d=parseInt(e.top-f.top-T.outerHeight()/2+a.outerHeight()/2),h=parseInt(e.left-f.left-T.outerWidth()-3);else"bottom"==a.attr("data-tooltip-position")&&(d=parseInt(e.top-f.top+a.outerHeight()),h=parseInt(e.left-f.left-T.outerWidth()/2+a.outerWidth()/2));else d=parseInt(e.top-f.top-T.outerHeight()),h=parseInt(e.left-f.left-T.outerWidth()/2+a.outerWidth()/2);"lightbox"!=Ta&&(0>h?h=0:h+T.outerWidth()>g.width()&&
(h=g.width()-T.outerWidth()),0>d+f.top&&(d=parseInt(e.top-f.top+T.outerHeight()+15)));T.css({left:h+"px",top:d+"px"}).show()}}).on("mouseleave",function(a){T.hide()});var od,Za;$a.on(ee,function(a){if(u){if(pf&&bb.length||R)return!1;jb(a);return!1}});if(!fa){var ge=function(){La&&($a.off(kb,J).off("mouseout",ge),Ya.off("mouseout",ge),h.previewSeek?Wb.hide():T.hide())};$a.on("mouseover",function(){La&&($a.on(kb,J).on("mouseout",ge),Ya.on("mouseout",ge))})}var Xb=Fa.hasClass("mvp-volume-horizontal"),
me=.5;Xb?Fa.width():Fa.height();var lc=Xb?kc.width():kc.height(),qd;0>K?K=0:1<K&&(K=1);0!=K&&(me=K);if(!th||fa)Fa.remove(),mc.on("click",function(a){m()});else mc.on("click",function(a){fa&&0!=Fa.length&&!Fa.hasClass("mvp-force-hide")||m()});Fa.on(ee,function(a){v(a);return!1});if(!fa){var he=function(){Fa.off(kb,Y).off("mouseout",he);Ya.off("mouseout",he);T.hide()};Fa.on("mouseover",function(){Fa.on(kb,Y).on("mouseout",he);Ya.on("mouseout",he)})}MVPUtils.isEmpty(c.facebookAppId)?console.log("facebookAppId has not been set in settings!"):
"file:"!=window.location.protocol&&L(c.facebookAppId);var wg=g.find(".mvp-settings-wrap"),G=g.find(".mvp-settings-holder");g.find(".mvp-settings-holder-inner");var rb=g.find(".mvp-settings-home");yg.on("click",function(){vb.hasClass("mvp-holder-visible")&&ud();ub.hasClass("mvp-holder-visible")&&vd();G.hasClass("mvp-holder-visible")?G.one("transitionend",function(){G.css({display:"none",width:"auto",height:"auto"});G.find(".mvp-settings-menu").css("display","none");rb.css("display","block");G.css("maxHeight",
"none").removeClass("mvp-settings-holder-scrollable")}).removeClass("mvp-holder-visible"):(G.css("display","block"),setTimeout(function(){G.addClass("mvp-holder-visible")},20))});rb.find(".mvp-menu-item").on("click",function(){var a=b(this).attr("data-target"),c=G.width(),f=G.height();rb.css("display","none");G.find(".mvp-settings-menu").css("display","none");G.css("maxHeight","none").removeClass("mvp-settings-holder-scrollable");G.css({width:"auto",height:"auto"});a=G.find("."+a).css("display","block");
var e=a.width(),d=a.height();d>yg.offset().top-Sa.scrollTop()&&(e+=16,G.css("maxHeight",H.height()-50).addClass("mvp-settings-holder-scrollable"));G.css({width:c+"px",height:f+"px"});setTimeout(function(){G.css({width:e+"px",height:d+"px"})},20)});G.find(".mvp-menu-header").on("click",function(){B()});kf.find(".mvp-menu-item").each(function(){b(this).on("click",va)});this.setSubtitle=function(a){if(!u||!e)return!1;cb.empty();ng.show();if(a!=Pc&&""!=a&&a)if(td[a])Yb=!1,ma=null,Ga&&Ga.removeClass("mvp-menu-active"),
Ga=oc.find(".mvp-menu-item[data-label='"+a+"']").addClass("mvp-menu-active"),ab=td[a],Yb=!0;else{var b,c=h.subtitles.length;for(b=0;b<c;b++){var g=h.subtitles[b];if(g.label==a){Yb=!1;ma=null;Ga&&Ga.removeClass("mvp-menu-active");Ga=oc.find(".mvp-menu-item[data-label='"+a+"']").addClass("mvp-menu-active");"hls"==O?Hg(g):"dash"!=O&&of(g);break}}}else Yb=!1,ma=null,Ga&&Ga.removeClass("mvp-menu-active"),Ga=oc.find(".mvp-menu-item[data-label='"+Pc+"']").addClass("mvp-menu-active");c=h.subtitles.length;
for(b=0;b<c;b++)g=h.subtitles[b],delete g["default"],g.value==a&&(g["default"]=!0);G.find(".mvp-subtitle-menu-value").text(a)};oh&&Ya.keyup(function(a){a.stopImmediatePropagation();a.preventDefault();if(!u)return!1;var c=a.keyCode;a=b(a.target);if(37==c)q.seekBackward();else if(39==c)q.seekForward();else if(33==c)Oc();else if(34==c)Jb();else if(32==c){if(a.hasClass("mvp-search-field")||a.hasClass("mvp-pwd-field"))return!1;q.togglePlayback()}else if(77==c){if(a.hasClass("mvp-search-field")||a.hasClass("mvp-pwd-field"))return!1;
m()}});var Dg=[Db,Hb,Da,V,Ye,Fc,Ve,Ze,$e,We,Xe,Cc,g.find(".mvp-pwd-confirm"),g.find(".mvp-info-close"),g.find(".mvp-share-item"),g.find(".mvp-share-close")],yh=Dg.length,ie;for(ie=0;ie<yh;ie++)b(Dg[ie]).css("cursor","pointer").on("click",Mg);q.destroyPlaylistScroll=function(){if("scroll"==pa)"undefined"!==typeof mCustomScrollbar&&Z.mCustomScrollbar("destroy");else if("buttons"==pa){Z.off("mousewheel DOMMouseScroll");Ha.off("click");ya.off("click");var a="horizontal"==na?"translateX":"translateY";
Ia=0;t.css({"-webkit-transform":""+a+"(0px)","-ms-transform":""+a+"(0px)",transform:""+a+"(0px)"})}else"hover"==pa&&Z.off("mousemove");df&&t.off("touchstart.ap touchmove.ap touchend.ap click.ap-touchclick");"horizontal"==na?t.css("left",0):t.css("top",0)};q.checkPlaylistScroll=function(){if("scroll"==pa){if("undefined"===typeof mCustomScrollbar){if(window.playlistScrollLoading){setInterval(function(){playlistScrollLoading||(clearInterval(this),q.checkPlaylistScroll())},100);return}window.playlistScrollLoading=
!0;var a=document.createElement("script");a.type="text/javascript";a.src="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.concat.min.js";a.onload=a.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||(q.checkPlaylistScroll(),window.playlistScrollLoading=!1)};a.onerror=function(){alert("Error loading "+this.src)};var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b);return}Z.mCustomScrollbar({axis:"horizontal"==
na?"x":"y",theme:c.playlistScrollTheme,scrollInertia:0,scrollButtons:{enable:!0},mouseWheel:{normalizeDelta:!0,deltaFactor:50,preventDefault:!0},keyboard:{enable:!1},advanced:{autoExpandHorizontalScroll:!0},callbacks:{onOverflowYNone:function(){Z.find(".mCSB_container").addClass("mvp-mCSB_full")},onOverflowY:function(){Z.find(".mCSB_container").removeClass("mvp-mCSB_full")},onTotalScroll:function(){yb&&X&&xb&&!W&&(W=!0,ja.show(),Na=!0,ka=[],"youtube"==xb?(sa||Ja("youtube"),sa.resumeLoad(X)):"vimeo"==
xb&&(ta||Ja("vimeo"),ta.resumeLoad(X)))},alwaysTriggerOffsets:!1}})}else if("buttons"==pa){if(!fa)Z.on("mousewheel DOMMouseScroll",function(a){if(!u||W||!Vb)return!1;if("horizontal"==na)var b=Z.width(),c=t.width(),f="translateX";else b=Z.height(),c=t.height(),f="translateY";if(!(c<b)){Ha.show();ya.show();if(a.originalEvent.wheelDelta)var g=0<a.originalEvent.wheelDelta?1:-1;else a.originalEvent.detail&&(g=0>a.originalEvent.detail?1:-1);Ia?a=Ia:(a=t[0].style.transform.replace(/[^\d.]/g,""),a=parseInt(a)||
0);a+=xh*g;0<a?(a=0,Ha.hide()):a<=b-c&&(a=b-c,ya.hide(),yb&&X&&!W&&(W=!0,ja.show(),Na=!0,ka=[],"youtube"==e?(sa||Ja("youtube"),sa.resumeLoad(X)):"vimeo"==e&&(ta||Ja("vimeo"),ta.resumeLoad(X))));Ia=a;t.css({"-webkit-transform":""+f+"("+a+"px)","-ms-transform":""+f+"("+a+"px)",transform:""+f+"("+a+"px)"});return!1}});Ha.on("click",function(){if(!u||W||Mb)return!1;Mb=!0;if("horizontal"==na)var a=Z.width(),b=t.width(),c="translateX";else a=Z.height(),b=t.height(),c="translateY";if(!(b<a)){Ha.show();ya.show();
Ia?b=Ia:(b=t[0].style.transform.replace(/[^\d.]/g,""),b=parseInt(b)||0);if(0!=b%qa){for(var e=-(b%qa);e<=a-2*qa;)e+=qa;b+=e}else b+=qa*Math.floor(a/qa);0<=b&&(b=0,Ha.hide());Ia=b;t.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){Mb=!1}).css({"-webkit-transform":""+c+"("+b+"px)","-ms-transform":""+c+"("+b+"px)",transform:""+c+"("+b+"px)"})}});ya.on("click",function(){if(!u||W||Mb)return!1;Mb=!0;if("horizontal"==na)var a=Z.width(),b=t.width(),c="translateX";else a=
Z.height(),b=t.height(),c="translateY";if(!(b<a)){Ha.show();ya.show();if(Ia)var g=Ia;else g=t[0].style.transform.replace(/[^\d.]/g,""),g=parseInt(g)||0;if(0!=g%qa){for(var h=g%qa+qa;h<=a-qa;)h+=qa;g-=h}else g-=qa*Math.floor(a/qa);g<=a-b&&(g=a-b,ya.hide(),yb&&X&&!W&&(W=!0,ja.show(),Na=!0,ka=[],"youtube"==e?(sa||Ja("youtube"),sa.resumeLoad(X)):"vimeo"==e&&(ta||Ja("vimeo"),ta.resumeLoad(X))));Ia=g;t.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){Mb=!1}).css({"-webkit-transform":""+
c+"("+g+"px)","-ms-transform":""+c+"("+g+"px)",transform:""+c+"("+g+"px)"})}});df&&Df()}else if("hover"==pa){if(!fa)Z.on("mousemove",function(a){if(!u||W||!Vb)return!1;if("horizontal"==na){var b=I.width(),c=t.width();if(c<b)return;var f=parseInt(Z.css("left"),10)+I.offset().left;a=(b-c)/b*(a.pageX-f);t.css("left",a+"px")}else{b=I.height();c=t.height();if(c<b)return;f=parseInt(Z.css("top"),10)+I.offset().top;a=(b-c)/b*(a.pageY-f);t.css("top",a+"px")}return!1});df&&Df()}te=!0};var N=new MVPPlaylistManager(c);
b(N).on("MVPPlaylistManager.COUNTER_READY",function(a,b){eb=!1;h=vc=null;ye=!1;wc=xc=fd=null;lb=[];Kb.find(".mvp-ad-indicator").remove();Te=!1;Kb.find(".mvp-chapter-indicator").remove();Rc.css({display:"none",opacity:0});bb=[];Se=!1;$a.removeClass("mvp-seekbar-chapters");ze=!1;ed=null;Kd=!1;Ng();xa()}).on("MVPPlaylistManager.RANDOM_CHANGE",function(a,b){b?$e.addClass("mvp-contr-btn-hover"):$e.removeClass("mvp-contr-btn-hover")}).on("MVPPlaylistManager.LOOP_CHANGE",function(a,b){b?Ze.addClass("mvp-contr-btn-hover"):
Ze.removeClass("mvp-contr-btn-hover")});window.onYouTubeIframeAPIReady=function(){};Sa.on("resize",function(){if(!u)return!1;cf&&clearTimeout(cf);cf=setTimeout(rc,Bg)});this.playMedia=function(){if(!u||!e||ea)return!1;if("audio"==e){if(w){var a=w.play();void 0!==a&&a.then(function(){})["catch"](function(a){V.show()})}}else"video"==e?M?(Aa.hide().empty(),M=null,xa()):p&&(a=p.play(),void 0!==a&&a.then(function(){})["catch"](function(a){V.show()})):"youtube"==e?M?(Aa.hide().empty(),M=null,xa()):z.playVideo():
"vimeo"==e&&(M?(Aa.hide().empty(),M=null,xa()):y.playVideo());ea=!0};this.pauseMedia=function(){if(!u||!e||!ea)return!1;"audio"==e?w&&w.pause():"video"==e?p&&p.pause():"youtube"==e?z.pauseVideo():"vimeo"==e&&y.pause();ea=!1};this.togglePlayback=function(){if(!u||!e)return!1;if(!Ob||!h.poster)if(h.pwd)Ua.css("display","block"),setTimeout(function(){Ua.addClass("mvp-holder-visible")},20);else if("audio"==e)if(M&&!La)V.hide(),ja.show(),xa();else{if(w)if(w.paused){var a=w.play();void 0!==a&&a.then(function(){})["catch"](function(a){V.show()})}else w.pause()}else"video"==
e?M&&!La?(Aa.hide().empty(),M=null,V.hide(),ja.show(),xa()):p&&(p.paused?(a=p.play(),void 0!==a&&a.then(function(){})["catch"](function(a){V.show()})):p.pause()):"youtube"==e?M&&!La?(Aa.hide().empty(),M=null,V.hide(),xa()):z&&(a=z.getPlayerState(),1==a?z.pauseVideo():2==a?z.playVideo():(-1==a||5==a||0==a)&&z.playVideo()):"vimeo"==e&&(M&&!La?(Aa.hide().empty(),M=null,V.hide(),xa()):y&&y.getPaused().then(function(a){a?y.play():y.pause()}))};this.nextMedia=function(){if(!u)return!1;Jb()};this.previousMedia=
function(){if(!u)return!1;Oc()};this.setVolume=function(a){if(!u)return!1;0>a?a=0:1<a&&(a=1);k(a)};this.toggleMute=function(){if(!u)return!1;m()};this.seek=function(a){if(!u||!e)return!1;"audio"==e?w.currentTime=a:"video"==e?p.currentTime=a:"youtube"==e?z.seekTo(a):"vimeo"==e&&y.setCurrentTime(a)};this.seekBackward=function(a){if(!u||!e)return!1;if("audio"==e){if(w)try{w.currentTime=Math.max(w.currentTime-(a||Ib),0)}catch(f){console.log(f)}}else if("video"==e){if(p)try{p.currentTime=Math.max(p.currentTime-
(a||Ib),0)}catch(f){console.log(f)}}else if("youtube"==e){var b=Math.max(z.getCurrentTime()-(a||Ib),0);z.seekTo(b)}else"vimeo"==e&&y.getCurrentTime().then(function(b){y.setCurrentTime(Math.max(b-(a||Ib),0))})};this.seekForward=function(a){if(!u||!e)return!1;if("audio"==e){if(w)try{w.currentTime=Math.min(w.currentTime+(a||Ib),w.duration)}catch(f){console.log(f)}}else if("video"==e){if(p)try{p.currentTime=Math.min(p.currentTime+(a||Ib),p.duration)}catch(f){console.log(f)}}else if("youtube"==e){var b=
Math.min(z.getCurrentTime()+(a||Ib),z.getDuration());z.seekTo(b)}else"vimeo"==e&&(0!=nb&&0!=Ic?(b=Math.min(Ic+(a||Ib),nb),y.setCurrentTime(b)):y.getCurrentTime().then(function(b){y.getDuration().then(function(c){y.setCurrentTime(Math.min(b+(a||Ib),c))})}))};this.getCurrentTime=function(){if(!u||!e)return!1;if("audio"==e)return w.currentTime;if("video"==e)return p.currentTime;if("youtube"==e)return z.getCurrentTime();if("vimeo"==e)return Ic};this.getDuration=function(){if(!u||!e)return!1;if("audio"==
e)return w.duration;if("video"==e)return p.duration;if("youtube"==e)return z.getDuration();if("vimeo"==e)return nb};this.getLoadProgress=function(){if(!u||!e)return!1;var a;if("audio"==e){if("undefined"!==typeof w.buffered&&0!=w.buffered.length){try{var b=w.buffered.end(w.buffered.length-1)}catch(f){}isNaN(b)||(a=b/Math.floor(w.duration))}}else if("video"==e){if("undefined"!==typeof p.buffered&&0!=p.buffered.length){try{b=p.buffered.end(p.buffered.length-1)}catch(f){}isNaN(b)||(a=b/Math.floor(p.duration))}}else"youtube"==
e?a=z.getVideoLoadedFraction():"vimeo"==e&&(a=Vd);return a};this.togglePlaylist=function(a){if(!u)return!1;qf(a)};this.toggleRandom=function(a){if(!u||"undefined"===typeof N)return!1;N.setRandom(a)};this.toggleLoop=function(a){if(!u||"undefined"===typeof N)return!1;N.setLooping(a)};this.setPlaybackRate=function(a){if(!u||!e)return!1;h.playbackRate=a;"audio"==e?w&&(w.playbackRate=a):"video"==e?p&&(p.playbackRate=a):"youtube"==e?z.setPlaybackRate(a):"vimeo"==e&&y.setPlaybackRate(a).then(function(a){})["catch"](function(a){console.log(a.name)})};
this.setPlaybackQuality=function(a){if(!u||!e)return!1;if("audio"==e||"video"==e){if("hls"!=O||"dash"!=O)h.quality=a,ke(a),xa(!0)}else"youtube"==e&&z.setPlaybackQuality(a)};this.toggleInfo=function(a){if(!u||!e)return!1;ud(a)};this.toggleShare=function(a){if(!u||!e)return!1;vd(a)};this.toggleFullscreen=function(){if(!u)return!1;Da.click()};this.openLightbox=function(){if(!u)return!1;e&&Qb();gb.css("display","block");setTimeout(function(){clearTimeout(this);gb.css("opacity",1)},50)};this.closeLightbox=
function(){if(!u)return!1;gb.one("transitionend",function(){gb.css("display","none")}).css("opacity",0);e&&Qb()};this.setNavigation=function(a){if(!u)return!1;q.destroyPlaylistScroll();pa=a;q.checkPlaylistScroll()};this.destroyMedia=function(){if(!u)return!1;Re()};this.destroyPlaylist=function(){if(!u)return!1;qe()};this.loadPlaylist=function(a){if(!u||W)return!1;if("string"===typeof a){if(xd==a)return!1;wf(a)}else return alert("Invalid value loadPlaylist!"),!1};this.setAutoPlay=function(a){aa=a};
this.inputMedia=function(a){if(!u||W)return!1;if("undefined"===typeof a)return alert("inputMedia method requires data parameter. inputMedia failed."),!1;S&&Sc();N.reSetCounter();Hd=a;xa()};this.loadMedia=function(a){if(!u||W||!Nb)return!1;if("number"===typeof a)0>a?a=0:a>E-1&&(a=E-1),N.processPlaylistRequest(a);else return alert("Invalid value loadMedia!"),!1};this.addTrack=function(a,c,f,e){if(!u||W)return!1;if("undefined"===typeof a)return alert("addTrack method requires format parameter. AddTrack failed."),
!1;if("undefined"===typeof c)return alert("addTrack method requires track parameter. AddTrack failed."),!1;Ad=!1;"undefined"!==typeof f&&(Ad=f);f=1;var d=!1;if("string"!==typeof c&&"[object Object]"!==Object.prototype.toString.call(c))if("[object Array]"===Object.prototype.toString.call(c))f=c.length,d=!0;else return alert("addTrack method requires track as string, object or array parameter. AddTrack failed."),!1;Oa=e;qc=!1;pc=!0;if(Nb)if("undefined"!==typeof Oa){if(0>Oa||Oa>E)return alert('Invalid position to insert track to. Position number "'+
e+'" doesnt exist. AddTrack failed.'),!1;Oa==E&&(qc=!0)}else qc=!0,Oa=E;else{if("undefined"!==typeof Oa){if(0!=Oa)return alert('Invalid position to insert track to. Position number "'+e+'" doesnt exist. AddTrack failed.'),!1}else Oa=0;qc=!0}W=!0;ja.show();Yc=-1;ka=[];Ma=[];for(e=0;e<f;e++){var g=d?c[e]:c;g="html"==a?b(b.parseHTML(g)):g;Ma.push(g)}E=Ma.length;Bd=!1;Nb||(Bd=!0);Nb="exist";yd=!1;Ba()};this.removeTrack=function(a){if(!u||W)return!1;if(0!=E){if("undefined"===typeof a)return alert("removeTrack method requires id parameter. removeTrack failed."),
!1;if("string"===typeof a){var c=!1;t.find(".mvp-playlist-item").each(function(){if(b(this).find(".mvp-playlist-title").html()==a)return e=b(this),a=t.find(".mvp-playlist-item").index(e),c=!0,!1});if(!c)return alert('Track with title "'+a+'" doesnt exist. RemoveTrack failed.'),!1}else if("number"===typeof a){a=parseInt(a,10);if(0>a||a>E-1)return alert('Invalid id number. Track number  "'+a+'" doesnt exist. RemoveTrack failed.'),!1;var e=t.find(".mvp-playlist-item").eq(a)}else return alert("removeTrack method requires either a id number or a track title to remove. removeTrack failed."),
!1;e.remove();E=t.children(".mvp-playlist-item").length;if(0<E){var g=N.getCounter();a==g?(Qb(),N.setPlaylistItems(E)):(N.setPlaylistItems(E,!1),a<g&&N.reSetCounter(N.getCounter()-1))}else qe();tc&&Dd&&Ff()}};this.setLoadMore=function(a){yb=a};this.loadMore=function(){if(!u||!xb||!X||W)return!1;W=!0;ja.show();Na=!0;ka=[];"youtube"==xb?(sa||Ja("youtube"),sa.resumeLoad(X)):"vimeo"==xb&&(ta||Ja("vimeo"),ta.resumeLoad(X))};this.getTitle=function(){return u&&h?h.title||h.domTitle||"":!1};this.getMediaPlaying=
function(){return u?ea:!1};this.getPlaylistLength=function(){return u?E:!1};this.getSetupDone=function(){return u};this.getSettings=function(){return c};this.getActiveItemId=function(){return u?"undefined"!==typeof N?N.getCounter():null:!1};this.adSkip=function(){if(!u||!R||!md)return!1;ld&&ld.trigger("click")};var je=MVPUtils.getUrlParameter();je.t&&(c.playbackPositionTime=je.t);je.media_id&&(c.activeItem=je.media_id);if(ic)if(!zg)localStorage.removeItem(ic);else if(tc&&localStorage.getItem(ic)){var Xa=
JSON.parse(localStorage.getItem(ic));c.playbackPositionTime=Xa.resumeTime;K=Xa.volume;c.activeItem=Xa.activeItem;localStorage.removeItem(ic)}if(tc)if(Dd){if(c.activePlaylist&&!MVPUtils.isEmpty(c.activePlaylist)&&localStorage.getItem(hc))if(Xa=JSON.parse(localStorage.getItem(hc)),Xa.date+Dd>Math.floor(Date.now()/1E3))if(Xa.activePlaylist==c.activePlaylist){var xd=c.activePlaylist;c.activePlaylist="";t.html(Xa.playlist);var yd=!0;console.log("Playlist is loading from cache!");if(Xa.loadMoreOnTotalScroll){var yb=
Xa.loadMoreOnTotalScroll;var X=Xa.nextPageToken;var ac=Xa.loadMoreItem;var xb=Xa.loadMoreType}}else localStorage.removeItem(hc);else localStorage.removeItem(hc)}else localStorage.removeItem(hc);this.deletePlaylistCache=function(){tc&&localStorage.removeItem(hc)};c.activePlaylist&&!MVPUtils.isEmpty(c.activePlaylist)?wf(c.activePlaylist):Ug();return this}})(jQuery);